import=infrastructure/rose-meta/lfric-infrastructure/HEAD
      =components/driver/rose-meta/lfric-driver/HEAD

[!0.1 Namelist Maintainers]
#============================================================
# Initial developers available to maintain namelist metadata
#============================================================
# base_mesh                    | Ricky Wong
# boundaries                   | Christine Johnson
# checks                       | Ben Shipway
# damping_layer                | Ben Shipway
# departure_points             | James Kent, Stephen Pring
# external_forcing             | Ian Boutle
# extrusion                    | Thomas Melvin, Iva Kavcic
# finite_element               | Thomas Melvin
# formulation                  | Thomas Melvin
# helmholtz_solver             | Thomas Melvin
# idealised                    | Stephen Pring
# initial_density              | Stephen Pring
# initial_pressure             | Chris Smith
# initial_temperature          | Ben Shipway
# initial_vapour               | Chris Smith
# initial_wind                 | Ben Shipway
# io                           | Samantha Adams
# mixed_solver                 | Thomas Melvin
# mixing                       | Thomas Melvin, Kirsty Hanley
# multigrid                    | Ricky Wong
# multires_coupling            | Thomas Bendall, Alex Brown
# esm_couple                   | Richard Hill
# orbit                        | James Manners
# orography                    | Iva Kavcic
# orography_agnesi_cartesian   | Iva Kavcic
# orography_agnesi_spherical   | Iva Kavcic
# orography_dcmip200_spherical | Iva Kavcic
# orography_schar_cartesian    | Iva Kavcic
# orography_schar_spherical    | Iva Kavcic
# partitioning                 | Mike Hobson
# physics                      | Ben Shipway
# planet                       | Thomas Melvin
# section_choice               | Ricky Wong
# socrates-radiation           | James Manners
# solver                       | Thomas Melvin
# star                         | James Manners
# subgrid                      | Stephen Pring
# submission                   | Ricky Wong
# time                         | Matthew Hambley
# timestepping                 | Thomas Melvin
# transport                    | Stephen Pring, Thomas Melvin
!=

#==============================================================================
# SYSTEM SETTINGS
#==============================================================================
[Submission]
ns=namelist/Job/Submission
sort-key=Section-001

#==============================================================================
# ENVIRONMENT VARIABLES AVAILABLE TO ROSE TASK
#==============================================================================
[env]
compulsory=true

[env=EXEC_NAME]
compulsory=true
description=Program executable name
sort-key=Panel-A01
type=raw

[env=OMP_NUM_THREADS]
compulsory=true
description=Number of threads for OpenMP
fail-if=this < 1 ;
range=1:
sort-key=Panel-A03
type=integer

[env=TOTAL_RANKS]
compulsory=true
description=Number of process ranks for a parallel run job
fail-if=this < 1 ;
range=1:
sort-key=Panel-A02
type=integer

[env=XIOS_SERVER_MODE]
compulsory=true
description=Run with XIOS in server mode
sort-key=Panel-A04
type=python_boolean

[env=XIOS_SERVER_RANKS]
compulsory=true
description=XIOS server process ranks
fail-if=this < 1 ;
range=1:
sort-key=Panel-A05
type=integer

#==============================================================================
# INITIAL CONDITIONS
#==============================================================================
[initial_conditions]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Initial conditions
sort-key=Section-A04

[io_checkpoint_restart]
compulsory=false
description=Settings for writing and restarting the model from checkpoints.
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=Section-A02

[io_diagnostics]
compulsory=false
description=Atmospheric model diagnostic output settings
ns=namelist/Job/IO/Diagnostics
sort-key=Section-A03

[io_dump]
compulsory=false
description=Atmospheric model dump settings
ns=namelist/Job/IO/Dumping
sort-key=Section-A03

[io_field_init]
compulsory=false
description=Settings that control how a field is initialised
ns=namelist/Job/IO/Field Initialisation
sort-key=Section-A03

[io_system]
compulsory=false
description=System related I/O for statistics and debugging
ns=namelist/Job/IO/System
sort-key=Section-A01

[jinja:suite.rc=threads]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A03

[jinja:suite.rc=wallclock]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A02

[jinja:suite.rc=xios_nodes]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A04

#==============================================================================
# JOB RUN
#==============================================================================
[job details]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job
sort-key=Section-A02
title=Job

[job details=end_date]
compulsory=false
type=integer

[job details=nprocessors]
compulsory=false

[job details=nsubs]
compulsory=false
range=1:
type=integer

[job details=start_date]
compulsory=false
type=integer

#==============================================================================
# MODEL SETUP
#==============================================================================
[model setup]
compulsory=false
description=??????
help=This section is for configuration of the model geometry.
ns=namelist/Model
sort-key=Section-A01
title=Model

#==============================================================================
# OROGRAPHY TRIGGERS FROM GEOMETRY
#==============================================================================
[namelist:base_mesh=geometry]
trigger=namelist:orography_agnesi_cartesian:   this == "'planar'"    ;
       =namelist:orography_bell_cartesian:     this == "'planar'"    ;
       =namelist:orography_schar_cartesian:    this == "'planar'"    ;
       =namelist:base_mesh=fplane:             this == "'planar'"    ;
       =namelist:base_mesh=f_lat_deg:          this == "'planar'"    ;
       =namelist:orography_agnesi_spherical:   this == "'spherical'" ;
       =namelist:orography_schar_spherical:    this == "'spherical'" ;
       =namelist:orography_dcmip200_spherical: this == "'spherical'" ;

#==============================================================================
# LIMITED AREA TRIGGERS FROM BASE MESH TOPOLOGY
#==============================================================================
[namelist:base_mesh=topology]
trigger=namelist:boundaries=transport_boundary_depth: this == "'non_periodic'" ;

#==============================================================================
# LIMITED AREA
#==============================================================================
[namelist:boundaries]
compulsory=true
description=Lateral boundary conditions for running limited-area, regional
           =models.
help=Specify whether to use lateral boundary conditions and the physical
    =location of the boundaries.
ns=namelist/Science/Dynamics/Boundaries
sort-key=Section-A00

[namelist:boundaries=blend_frequency]
compulsory=true
description=Frequency of calls to blending
!enumeration=true
help=Options for when the blending is done within the semi-implicit
    =timestep:
    =     'inner': The blending is done at the end of each inner iteration
    =     'outer': The blending is done at the end of the final inner
    =              iteration within each outer iteration
    =     'final': The blending is done at the end of the final inner
    =              iteration within the final outer iteration
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A08
value-titles=Inner, Outer, Final
values='inner', 'outer', 'final'

[namelist:boundaries=blending_weights]
compulsory=true
description=Rim weights from outermost first inwards
fail-if=this <= 0.0 ;
help=The blending zone is the region around the edge (rim) of the
    =model domain where data will undergo weighted relaxation back to
    =the values in the LBC data fields.
    =
    =Blending weights are applied at each layer of cells from the domain
    =edge radiating inwards using:
    =
    =   Field_updated = Weighting*Field_LBC_data + (1 - Weighting)*Field_model_data
    =
    =Blending weights should be specified for each layer from 1.0, decreasing
    =monotonically.
    =
    =Note:
    =  * The number of blending weights must be <= number of available rim layers
    =    in the LBC data fields.
    =  * Blending weight values should be > 0.0
    =  * The outer weights may need to be padded with values of 1 depending
    =    on the choices made in the science configuration.
    =
!kind=default
length=:
ns=namelist/Science/Dynamics/Boundaries
range=this > 0.0 and this <= 1.0
sort-key=Panel-A03
type=real

[namelist:boundaries=boundary_e]
compulsory=true
description=The number of cells to the Eastern linear solver boundary.
fail-if=this <0 ;
help=Specify the position of the Eastern lateral boundary
    =for the linear solver. This is the number of cells from
    =the Eastern edge of the mesh (or panel if using a cubed-sphere).
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A05
type=integer

[namelist:boundaries=boundary_n]
compulsory=true
description=The number of cells to the Northern linear solver boundary.
fail-if=this <0 ;
help=Specify the position of the Northern lateral boundary
    =for the linear solver. This is the number of cells from
    =the Northern edge of the mesh (or panel if using a cubed-sphere).
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A03
type=integer

[namelist:boundaries=boundary_s]
compulsory=true
description=The number of cells to the Southern linear solver boundary.
fail-if=this <0 ;
help=Specify the position of the Southern lateral boundary
    =for the linear solver. This is the number of cells from
    =the Southern edge of the mesh (or panel if using a cubed-sphere).
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A04
type=integer

[namelist:boundaries=boundary_w]
compulsory=true
description=The number of cells to the Western linear solver boundary.
fail-if=this <0 ;
help=Specify the position of the Western lateral boundary
    =for the linear solver. This is the number of cells from
    =the Western edge of the mesh (or panel if using a cubed-sphere).
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A06
type=integer

[namelist:boundaries=edge_cells_ew]
compulsory=true
description=Total number of mesh cells in East-West direction.
fail-if=this <1 ;
help=Specify the total number of cells along the E-W edge of the planar domain
    =or the total number of cells along the edge of a cubed-sphere panel.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=1:
sort-key=Panel-A02
type=integer

[namelist:boundaries=edge_cells_ns]
compulsory=true
description=Total number of mesh cells in North-South direction.
fail-if=this <1 ;
help=Specify the total number of cells along the N-S edge of the planar domain
    =or the total number of cells along the edge of a cubed-sphere panel.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=1:
sort-key=Panel-A01
type=integer

[namelist:boundaries=inner_width_ew]
compulsory=true
description=Number of cells to be overwritten inside E/W solver boundary.
fail-if=this > namelist:boundaries=rim_width_ew - namelist:boundaries=outer_width_ew
help=Specify the number of cells on the INTERIOR side of
    =the solver boundary (boundary_e or boundary_w) to be
    =overwritten by the driving model data.
    =
    = Mesh edge                 Solver boundary
    =     |<------boundary_w...----->|
    =          |<----***------------rim_width_ew---------------------***----->|
    =          |<--outer_width_ew--->|<-.inner_width_ew.->|.....blend.........|
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A10
type=integer

[namelist:boundaries=inner_width_ns]
compulsory=true
description=Number of cells to be overwritten inside N/S solver boundary.
fail-if=this > namelist:boundaries=rim_width_ns - namelist:boundaries=outer_width_ns
help=Specify the number of cells on the INTERIOR side of
    =the solver boundary (boundary_n or boundary_s) to be
    =overwritten by the driving model data.
    =
    = Mesh edge                 Solver boundary
    =     |<------boundary_n...----->|
    =          |<----***------------rim_width_ns---------------------***----->|
    =          |<--outer_width_ns--->|<-.inner_width_ns.->|.....blend.........|
    =
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A09
type=integer

[namelist:boundaries=lbc_method]
compulsory=true
description=LBC rim weights/mask generation method
!enumeration=true
help=Onion Layer
    =----------------
    =Blending weights used to imply depth of
    =rim region where weights are applied to
    =LBC data.
    =
    =Coordinate based
    =----------------
    =Physical coordinates used to determine
    =locations and therefore weights and masks.
    =
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A08
trigger=namelist:boundaries=blending_weights: this == "'onion_layer'" ;
       =namelist:boundaries=solver_boundary_depth: this == "'onion_layer'" ;
       =namelist:boundaries=edge_cells_ns: this == "'coordinate_based'" ;
       =namelist:boundaries=edge_cells_ew: this == "'coordinate_based'" ;
       =namelist:boundaries=boundary_e: this == "'coordinate_based'" ;
       =namelist:boundaries=boundary_w: this == "'coordinate_based'" ;
       =namelist:boundaries=boundary_n: this == "'coordinate_based'" ;
       =namelist:boundaries=boundary_s: this == "'coordinate_based'" ;
       =namelist:boundaries=rim_width_ns: this == "'coordinate_based'" ;
       =namelist:boundaries=rim_width_ew: this == "'coordinate_based'" ;
value-titles=Onion Layer, Coordinate based
values='onion_layer','coordinate_based'

[namelist:boundaries=limited_area]
compulsory=true
description=Running in limited_area configuration.
help=Run as a limited area model and impose lateral boundary conditions
    =(currently with zero flux boundary conditions).
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A00
trigger=namelist:boundaries=normal_only: .true. ;
       =namelist:boundaries=output_lbcs: .true. ;
       =namelist:boundaries=lbc_method: .true. ;
       =namelist:boundaries=transport_boundary_depth: .true. ;
       =namelist:boundaries=blend_frequency: .true. ;
type=logical

[namelist:boundaries=normal_only]
compulsory=true
description=Use only W2 degrees of freedom (dofs) on the boundary for LBCs.
help=When '.true.' use the W2 dofs on the boundary (the normal
    =component of the wind). When '.false.' use the W2 dofs on the
    =boundary and 1 cell in (the normal and tangential components).
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A00
type=logical

[namelist:boundaries=outer_width_ew]
compulsory=true
description=Number of cells to be overwritten outside E/W solver boundary.
help=Specify the number of cells on the EXTERIOR side of
    =the solver boundary (boundary_e or boundary_w) to be
    =overwritten by the driving model data. This will often
    =be the same value as boundary_e and boundary_w.
    =
    = Mesh edge                 Solver boundary
    =     |<------boundary_w...----->|
    =          |<----***------------rim_width_ew---------------------***----->|
    =          |<--outer_width_ew--->|<-.inner_width_ew.->|.....blend.........|
    =
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A12
type=integer

[namelist:boundaries=outer_width_ns]
compulsory=true
description=Number of cells to be overwritten outside N/S solver boundary.
help=Specify the number of cells on the EXTERIOR side of
    =the solver boundary (boundary_n or boundary_s) to be
    =overwritten by the driving model data. This will often
    =be the same value as boundary_n and boundary_s.
    =
    = Mesh edge                 Solver boundary
    =     |<------boundary_n...----->|
    =          |<----***------------rim_width_ns---------------------***----->|
    =          |<--outer_width_ns--->|<-.inner_width_ns.->|.....blend.........|
    =
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A11
type=integer

[namelist:boundaries=output_lbcs]
compulsory=true
description=Output the lbcs in the diagnostics file
help=
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A00
type=logical

[namelist:boundaries=rim_width_ew]
compulsory=true
description=Total number of cells of the East-West LBC data.
help=a) If rim_width_ew>0 this is the number of cells (an integer) for the
    = width of the lateral boundary condition (LBC) on both the East and West
    = boundaries.
    = The blending weight is 1 in outer_width_ew and inner_width_ew - where
    = the data is overwritten with the driving model data.
    = The blending weight then ramps down from 1 to 0 in the remaining cells
    = in rim_width_ew - where the data is blended with the driving model data.
    =b) If rim_width_ew=0 then the width of the lateral boundary condition
    = data is zero - but a boundary condition is still enforced in the linear
    = solver (for models with no advection).
    =c) If rim_width_ew<0 then there is no boundary condition - on both the
    = East and West boundaries. i.e. periodic boundary conditions are enforced
    = instead.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A08
trigger=namelist:boundaries=inner_width_ew: this > 0 ;
       =namelist:boundaries=outer_width_ew: this > 0 ;
type=integer

[namelist:boundaries=rim_width_ns]
compulsory=true
description=Total number of cells of the North-South LBC data.
help=a) If rim_width_ns>0 this is the number of cells (an integer) for the
    = width of the lateral boundary condition (LBC) on both the North and South
    = boundaries.
    = The blending weight is 1 in outer_width_ns and inner_width_ns- where
    = the data is overwritten with the driving model data.
    = The blending weight then ramps down from 1 to 0 in the remaining cells
    = in rim_width_ns - where the data is blended with the driving model data.
    =b) If rim_width_ns=0 then the width of the lateral boundary condition
    = data is zero - but a boundary condition is still enforced in the linear
    = solver (for models with no advection).
    =c) If rim_width_ns<0 then there is no boundary condition - on both the
    = North and South boundaries. i.e. periodic boundary conditions are
    = enforced instead.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
sort-key=Panel-A07
trigger=namelist:boundaries=inner_width_ns: this > 0 ;
       =namelist:boundaries=outer_width_ns: this > 0 ;
type=integer

[namelist:boundaries=solver_boundary_depth]
compulsory=true
description=Depth to boundary of linear solver (in cells)
fail-if=this <0 ;
help=Specifies the location of the lateral edge boundary of the
    =linear solver domain. The distance to the boundary is
    =given as number cells inward from the mesh domain edge.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A05
type=integer

[namelist:boundaries=transport_boundary_depth]
compulsory=true
description=Depth to boundary of transport scheme (in cells).
fail-if=this <0 ;
help=Specifies the number of cells that are needed by the transport scheme at
    =the edge of the model domain for limited area (non-periodic) configurations.
    =This will depend on the choice of time splitting scheme. Recommended value
    =for MoL with SSP3 is:
    =
    =     transport_boundary_depth = 6
    =
    =Note that the region with blending weights set to 1 should extend beyond
    =this depth.
    =This is only used for non-periodic domains.
!kind=default
ns=namelist/Science/Dynamics/Boundaries
range=0:
sort-key=Panel-A13
type=integer

#==============================================================================
# CHECKING CRITERIA
#==============================================================================
[namelist:checks]
compulsory=true
description=This namelist is used to add in runtime checks
help=See individual options for further help.
ns=namelist/Science/Dynamics/checks
sort-key=Section-A01
title=Checking criteria

[namelist:checks=limit_cfl]
compulsory=true
description=Limit the local advective Courant number
help=If true, then tests the local advective Courant number
    =and if necessary reduces the wind components to ensure
    =this doesn't exceed the limit given by max_cfl. #'
    =Note that this will change the answers and is only
    =designed to aid model development.  It should not be
    =used in operational rund.
!kind=default
sort-key=Panel-A01
trigger=namelist:checks=max_cfl: .true. ;
type=logical

[namelist:checks=max_cfl]
compulsory=true
description=Set the maximum  advective Courant number.
fail-if=this <= 0.0 ;
help=If limit_cfl=.true., then this will be used to determine the maximum advective Courant number.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real
warn-if=this > 10.0 ;

#==============================================================================
# DAMPING LAYER
#==============================================================================
[namelist:damping_layer]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/Damping layer
sort-key=Section-A02

[namelist:damping_layer=dl_base]
compulsory=true
description=??????
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=Base height of damping layer
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:damping_layer=dl_str]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Strength of damping layer
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:damping_layer=dl_type]
compulsory=true
description=Type of damping layer profile
!enumeration=true
help=Standard: Sine-squared profile above dl_base
    =Latitude: Standard profile with cos(latitude) dip from equator to 50N/S.
    =          Poleward of 50N/S, profile is fixed at that of 50N/S.
sort-key=Panel-A03
value-titles=Standard,Latitude
values='standard','latitude'

#==============================================================================
# DEPARTURE POINTS (to replace biperiodic_deppt)
#==============================================================================
[namelist:departure_points]
compulsory=true
description=The method to calculate departure points.
help=This namelist selects the method to choose the departure points
    =for the flux form semi-Lagrangian (FFSL) scheme and the vertical
    =semi-Lagrangian and SLICE schemes.
ns=namelist/Science/Dynamics/departure_points
sort-key=Section-A03
title=Departure points

[namelist:departure_points=departure_grid]
compulsory=true
description=Option for using the physical or uniform vertical departure point calculation.
!enumeration=true
fail-if=
help=Choose whether to use the physical grid or a uniform grid for the vertical departure
    =point calculation.
sort-key=Panel-A01
value-titles=physical, uniform
values='physical', 'uniform'

[namelist:departure_points=method]
compulsory=true
description=Method for calculating departure points in horizontal
!enumeration=true
fail-if=
help=Available horizontal departure point calculation choices:
    =Eulerian: uses the new velocity at the arrival point.
    =Trapezoidal: uses the old velocity interpolated to the estimated
    =departure point and the new velocity at the arrival point. Only suitable
    =for planar domain.
    =Midpoint: interpolates the old velocity to halfway along the trajectory.
    =Only suitable for planar domain.
    =TimeAverage: averages the old and new velocities at the arrival point.
sort-key=Panel-A01
value-titles=Eulerian, Trapezoidal, Midpoint, Time Average
values='euler', 'trapezoidal', 'midpoint', 'timeaverage'

[namelist:departure_points=n_dep_pt_iterations]
compulsory=true
description=The number of iterations for the Trapezoidal and Midpoint methods.
fail-if=
help=The number of iterations for the Trapezoidal and Midpoint departure point
    =calculation methods in both the horizontal and vertical. The departure point
    =estimate converges quickly, and so only 2-3 iterations are usually required.
!kind=default
!range=
sort-key=Panel-A02
type=integer

[namelist:departure_points=vertical_limit]
compulsory=true
description=Method for correcting departure points that exceed the vertical domain.
!enumeration=true
fail-if=
help=Select option for how to deal with departure points that lie below the surface
    =or above the model top:
    =Boundary   : sets the departure point to the boundary value.
    =Exponential: follows the method of Wood et al. (2009) to use an exponential
    =function to force the departure point into the domain.
sort-key=Panel-A01
value-titles=Boundary, Exponential
values='boundary', 'exponential'

[namelist:departure_points=vertical_method]
compulsory=true
description=Method for calculating departure points in vertical.
!enumeration=true
fail-if=
help=Available vertical departure point calculation choices:
    =Eulerian: uses the new velocity at the arrival point.
    =Trapezoidal: uses the old velocity interpolated to the estimated
    =departure point and the new velocity at the arrival point.
    =Midpoint: interpolates the old velocity to halfway along the trajectory.
    =TimeAverage: averages the old and new velocities at the arrival point.
sort-key=Panel-A01
value-titles=Eulerian, Trapezoidal, Midpoint, Time Average
values='euler', 'trapezoidal', 'midpoint', 'timeaverage'

#==============================================================================
# ESM COUPLE (e.g. OASIS3-MCT)
#==============================================================================
[namelist:esm_couple]
compulsory=true
description=This namelist is used to control coupling operations
           =between lfric and other Earth system model components.
help=See individual options for further help.
ns=namelist/Model/Coupling
sort-key=Section-A50
title=Coupling controls

[namelist:esm_couple=l_esm_couple_test]
compulsory=true
description=Test coupling exchanges?
help=Set to true in order to test coupling operations
    =without using the incoming coupling field values to drive LFRic.
    =
    =Coupling "put" operations will be performed as normal.
    =
    =Coupling "get" operations will result in data
    =being recieved but not used by LFRic.
    =
    =This should normally only be set to true for
    =development and debugging purposes.
    =
    =This switch will have no effect if the model is compiled without
    =the presence of a suitable coupler (e.g. OASIS3-MCT)
sort-key=Panel-A51
type=logical

#==============================================================================
# External forcing
#==============================================================================
[namelist:external_forcing]
compulsory=true
description=External forcing options
ns=namelist/Science/External Forcing
sort-key=Section-A13
title=External forcing

[namelist:external_forcing=hs_random]
compulsory=true
description=Random perturbations to the Held-Suarez theta forcing
help=Option to add in a random perturbations to the Held-Suarez theta forcing:
    = After the calculation of the theta increment, this will be multiplied
    = by a factor (1 + 0.0001*(p - 0.5)), where p is a random number taken from
    = a Uniform distribution on [0,1].
    = Note, this is for model development purposes.
!kind=default
ns=namelist/Science/External Forcing
sort-key=Panel-A01a
type=logical

[namelist:external_forcing=temp_tend_coord]
compulsory=true
description=Vertical coordinate for temperature tendency forcing
!enumeration=true
help=Temperature tendency forcing profiles may be specified with either height
    =or pressure as the vertical coordinate. In both cases the coordinate
    =information is entered using the temp_tend_heights array.
    =Height: height in metres above sea-level. Values should be monotonically increasing.
    =Pressure: pressure level in Pascals. Values should be monotonically decreasing.
!kind=default
ns=namelist/Science/External Forcing
sort-key=Panel-A01b
value-titles=Height, Pressure
values='height', 'pressure'

[namelist:external_forcing=temp_tend_data]
!bounds=namelist:external_forcing=temp_tend_size
compulsory=true
description=Temperature tendency data
fail-if=len(this) != namelist:external_forcing=temp_tend_size
help=Temperature tendency (K/s)
!kind=default
length=:
ns=namelist/Science/External Forcing
sort-key=Panel-A01d
type=real

[namelist:external_forcing=temp_tend_heights]
!bounds=namelist:external_forcing=temp_tend_size
compulsory=true
description=Temperature tendency heights
fail-if=len(this) != namelist:external_forcing=temp_tend_size
help=Heights for temperature tendency profile. If in ascending order, these are
    =taken to be height in metres. Heights specified in descending order are
    =taken to be pressure coordinate in Pascals.
!kind=default
length=:
ns=namelist/Science/External Forcing
sort-key=Panel-A01c
type=real

[namelist:external_forcing=temp_tend_size]
compulsory=true
description=Size of temperature tendency profile
help=Number of data points in the temperature tendency profile.
!kind=default
ns=namelist/Science/External Forcing
range=0:100
sort-key=Panel-A01a
type=integer

[namelist:external_forcing=theta_forcing]
compulsory=true
description=External forcing of potential temperature (theta)
!enumeration=true
help=Available forcing options are:
    =Held-Suarez theta forcing term, based on Wedi and Smolarkiewicz 2009:
    = Wedi, N. P. and Smolarkiewicz, P. K. (2009), A framework for testing global
    = non-hydrostatic models. Q.J.R. Meteorol. Soc., 135: 469-484.
    = DOI: 10.1002/qj.377.
    =Theta forcing term for the Earth-Like test based on Menou & Rauscher (2009),
    = Atmospheric Circulation of Hot Jupiters: A Shallow Three-Dimensional Model,
    = ApJ, 700, 887-897, DOI: 10.1088/0004-637X/700/1/887, 2009;
    = and Tidally-Locked forcing based on Merlis and Schneider (2010),
    = Atmospheric Dynamics of Earth-Like Tidally Locked Aquaplanets,
    = Journal of Advances in Modeling Earth Systems, 2, 13,
    = DOI: 10.1029/JAMES.2010.2.13, 2010.
    =Temperature tendency profile.
    =All three tests are detailed in Mayne et al., (2014),
    =Using the UM dynamical cores to reproduce idealised 3-D flows,
    =Geoscientific Model Development, Volume 7, Issue 6, 2014, pp. 3059-3087,
    =DOI: 10.5194/gmd-7-3059-2014.
!kind=default
ns=namelist/Science/External Forcing
sort-key=Panel-A01
trigger=namelist:external_forcing=hs_random: this == "'held_suarez'" ;
       =namelist:external_forcing=temp_tend_coord: this == "'temp_tend'";
       =namelist:external_forcing=temp_tend_data: this == "'temp_tend'";
       =namelist:external_forcing=temp_tend_heights: this == "'temp_tend'";
       =namelist:external_forcing=temp_tend_size: this == "'temp_tend'";
value-titles=None, Held-Suarez, Earth-Like, Temperature Tendency Profile
values='none', 'held_suarez', 'earth_like', 'temp_tend'

[namelist:external_forcing=wind_forcing]
compulsory=true
description=External forcing of the wind
!enumeration=true
help=Held-Suarez wind forcing term, based on Wedi and Smolarkiewicz 2009:
    = Wedi, N. P. and Smolarkiewicz, P. K. (2009), A framework for testing global
    = non-hydrostatic models. Q.J.R. Meteorol. Soc., 135: 469-484.
    = doi: 10.1002/qj.377
!kind=default
ns=namelist/Science/External Forcing
sort-key=Panel-A02
value-titles=None, Held-Suarez
values='none','held_suarez'

[namelist:files]
compulsory=true
description=Sets up options for files
help=??????
    =??????
ns=namelist/Job/IO
sort-key=sec-AAAA

[namelist:files=aerosols_ancil_path]
compulsory=true
description=Path to aerosols file from ancillary files directory
help=This file contains the aerosols data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=albedo_nir_ancil_path]
compulsory=true
description=Path to near-IR albedo file from ancillary files directory
help=This file contains the near-IR albedo data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=albedo_vis_ancil_path]
compulsory=true
description=Path to visible albedo file from ancillary files directory
help=This file contains the visible albedo data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=ancil_directory]
compulsory=true
description=Directory for ancillary files
help=Path to the directory where LFRic ancillaries are stored
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=checkpoint_stem_name]
compulsory=true
description=Filename stem for checkpoint files
help=Filename stem for checkpoint files
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=A-007
!string_length=filename
type=character

[namelist:files=diag_stem_name]
compulsory=true
description=Filename stem for diagnostic files
help=Filename stem for diagnostic files
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A02
!string_length=filename
type=character

[namelist:files=dms_conc_ocean_ancil_path]
compulsory=true
description=Path to DMS (surface) concentrations in ocean in ancil directory
help=This file contains the DiMethyl Sulphide (DMS) concentrations for
    = aerosols, generated at the ocean surface, which feed into DMS emissions
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_bc_biofuel_ancil_path]
compulsory=true
description=Path to BC biofuel emissions from ancillary files directory
help=This file contains the Black Carbon (BC) surface aerosol emissions
    = generated from biofuels
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_bc_biomass_ancil_path]
compulsory=true
description=Path to BC biomass emissions from ancillary files directory
help=This file contains the Black Carbon (BC) (3-D) aerosol emissions
    = generated from biomass burning, incl. forest fires
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_bc_fossil_ancil_path]
compulsory=true
description=Path to BC fossil fuel emissions from ancillary files directory
help=This file contains the Black Carbon (BC) surface aerosol emissions
    = generated from fossil fuels
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_dms_land_ancil_path]
compulsory=true
description=Path to DMS (surface) emissions over land from ancillary directory
help=This file contains the DiMethyl Sulphide surface aerosol emissions
    = generated over land
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_monoterp_ancil_path]
compulsory=true
description=Path to Monoterpene (surface) emissions from ancillary directory
help=This file contains the Monoterpene surface aerosol emissions
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_om_biofuel_ancil_path]
compulsory=true
description=Path to OC biofuel emissions from ancillary files directory
help=This file contains the Organic Carbon (OC) surface aerosol emissions
    = generated from biofuels
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_om_biomass_ancil_path]
compulsory=true
description=Path to OC biomass emissions from ancillary files directory
help=This file contains the Organic Carbon (OC) (3-D) aerosol emissions
    = generated from biomass burning, incl. forest fires
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_om_fossil_ancil_path]
compulsory=true
description=Path to OC fossil fuel emissions from ancillary files directory
help=This file contains the Organic Carbon (OC) surface aerosol emissions
    = generated from fossil fuels
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_so2_high_ancil_path]
compulsory=true
description=Path to SO2-high emission from ancillary files directory
help=This file contains the SO2 high (but fixed-level) aerosol emissions
    = generated by industrial sources/ shipping
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_so2_low_ancil_path]
compulsory=true
description=Path to SO2-low emission from ancillary files directory
help=This file contains the SO2 low surface aerosol emissions
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=emiss_so2_nat_ancil_path]
compulsory=true
description=Path to SO2-natural emission from ancillary files directory
help=This file contains the natural SO2 (3D) emissions for aerosols
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=h2o2_limit_ancil_path]
compulsory=true
description=Path to H2O2 (limiting oxidant) file from ancillary files directory
help=This file contains the H2O2 (hydrogen peroxide) mass mixing ratio data
    = required to run GLOMAP aerosols in Offline mode
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=ho2_ancil_path]
compulsory=true
description=Path to HO2 (oxidant) file from ancillary files directory
help=This file contains the HO2 (hydroperoxy radical) mass mixing ratio data
    = required to run GLOMAP aerosols in Offline mode
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=hydtop_ancil_path]
compulsory=true
description=Path to TOPMODEL hydrology file from ancillary files directory
help=This file contains the topographic index data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=land_area_ancil_path]
compulsory=true
description=Path to land area fraction file from ancillary files directory
help=This file contains the land area fraction data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=lbc_directory]
compulsory=true
description=Path to lbc directory
help=This directory contains the lbc file
ns=namelist/Job/IO/LBCs
!string_length=filename
type=character

[namelist:files=lbc_filename]
compulsory=true
description=Path to lbc file
help=This file contains the lbc data
ns=namelist/Job/IO/LBCs
!string_length=filename
type=character

[namelist:files=ls_directory]
compulsory=true
description=Path to the linearisation state directory
help=This directory contains the linearisation state file
ns=namelist/Job/IO/LS
!string_length=filename
type=character

[namelist:files=ls_filename]
compulsory=true
description=Path to the linearisation state file
help=This file contains the linearisation state data
ns=namelist/Job/IO/LS
!string_length=filename
type=character

[namelist:files=no3_ancil_path]
compulsory=true
description=Path to NO3 (oxidant) file from ancillary files directory
help=This file contains the NO3 (nitrate radical) mass mixing ratio data
    = required to run GLOMAP aerosols in Offline mode
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=o3_ancil_path]
compulsory=true
description=Path to O3 (oxidant) file from ancillary files directory
help=This file contains the O3 (ozone) mass mixing ratio data
    = required to run GLOMAP aerosols in Offline mode
ns=namelist/Job/IO/Ancils
type=character

[namelist:files=oh_ancil_path]
compulsory=true
description=Path to OH (oxidant) file from ancillary files directory
help=This file contains the OH (hydroxl radical) mass mixing ratio data
    = required to run GLOMAP aerosols in Offline mode
ns=namelist/Job/IO/Ancils
type=character

[namelist:files=orography_ancil_path]
compulsory=true
description=Path to orography file from ancillary files directory
help=This file contains global surface altitude information used for orography
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=ozone_ancil_path]
compulsory=true
description=Path to Ozone file from ancillary files directory
help=This file contains the ozone mass mixing ratio data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=plant_func_ancil_path]
compulsory=true
description=Path to plant functional type file from ancillary files directory
help=This file contains the canopy height and leaf area index
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=sea_ancil_path]
compulsory=true
description=Path to sea file from ancillary files directory
help=This file contains the sea surface chlorophyll concentration
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=sea_ice_ancil_path]
compulsory=true
description=Path to sea ice file from ancillary files directory
help=This file contains the sea ice thickness and fraction
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=soil_ancil_path]
compulsory=true
description=Path to soil file from ancillary files directory
help=This file contains the soil data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=soil_dust_ancil_path]
compulsory=true
description=Path to soil inputs for dust from ancil files directory
help=This file contains the soil properties required for dust emissions
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=sst_ancil_path]
compulsory=true
description=Path to sst file from ancillary files directory
help=This file contains the sea surface temperature
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=start_dump_directory]
compulsory=true
description=Directory for start dumps
help=??????
ns=namelist/Job/IO/Dumping
!string_length=filename
type=character

[namelist:files=start_dump_filename]
compulsory=true
description=Filename for start dump
help=??????
ns=namelist/Job/IO/Dumping
!string_length=filename
type=character

[namelist:files=surface_frac_ancil_path]
compulsory=true
description=Path to surface types fraction file from ancillary files directory
help=This file contains the fractions of different surface types
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

#==============================================================================
# FINITE ELEMENT
#==============================================================================
[namelist:finite_element=vorticity_in_w1]
compulsory=true
description=??????
help=Compute the vorticity in W1 (or implied W2) space
!kind=default
sort-key=Panel-A07
type=logical

#==============================================================================
# DYNAMICS
#==============================================================================
#
#==============================================================================
# FORMULATION
#==============================================================================
[namelist:formulation]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Science/Dynamics
sort-key=Section-A07
title=Dynamics

[namelist:formulation=dlayer_on]
compulsory=true
description=??????
help=Use damping layer yes/no
!kind=default
ns=namelist/Science/Dynamics
sort-key=Panel-A07
trigger=namelist:damping_layer: .true. ;
type=logical

[namelist:formulation=dry_static_adjust]
compulsory=true
description=??????
help=Dry static adjustment of reference profile
!kind=default
sort-key=Panel-A06
type=logical

[namelist:formulation=eos_method]
compulsory=true
description=Method used to treat equation of state (EoS). This method will
           =be used consistently throughout the model
!enumeration=true
help=Two methods are available for treating the EoS:
    ='sampled' - Sampled at finite element data points
    ='projected' - Galerkin projected onto finite element representation
sort-key=Panel-A12
value-titles=Sampled at data points, Projected onto elements
values='sampled', 'projected'

[namelist:formulation=exner_from_eos]
compulsory=true
description=Recompute Exner pressure after each solve
help=Diagnose the Exner pressure function from the equation of state
    =after each mixed solve
!kind=default
sort-key=Panel-A11
type=logical

[namelist:formulation=init_exner_bt]
compulsory=true
description=??????
help=Initialize exner hydrostatically bottom to top
!kind=default
sort-key=Panel-A10
type=logical

[namelist:formulation=l_multigrid]
compulsory=true
description=Enable Multi-Grid
help=
!kind=default
ns=namelist/Science/Dynamics
sort-key=Panel-A01
trigger=namelist:multigrid: .true. ;
type=logical

[namelist:formulation=moisture_formulation]
compulsory=true
description=Select behaviour of moisture fields
!enumeration=true
help=Dry: Moisture fields set to zero, have no effect on dynamics and are not transported.
    =Passive: Moisture fields transported as passive tracers.
    =Active: Moisture fields transported as active tracers, with their inertia
    =        affecting the dynamics.
    =Traditional: Traditional treatment of moist dynamics. Moisture fields are transported,
    =             their inertia affects dynamics, and vapour pressure is
    =             accounted for in the equation of state and pressure gradients.
ns=namelist/Science
sort-key=Panel-A02
trigger=namelist:section_choice=aerosol: 'traditional' ;
       =namelist:section_choice=cloud: 'traditional' ;
       =namelist:section_choice=methane_oxidation: 'traditional' ;
       =namelist:section_choice=microphysics: 'traditional' ;
       =namelist:transport=moisture_eqn: 'traditional' ;
value-titles=Dry, Passive tracers, Active tracers, Traditional approximations
values='dry', 'passive', 'active', 'traditional'

[namelist:formulation=rotating]
compulsory=true
description=??????
help=Turn on/off Coriolis terms
!kind=default
sort-key=Panel-A03
type=logical

[namelist:formulation=shallow]
compulsory=true
description=??????
help=Run in shallow atmosphere mode
!kind=default
sort-key=Panel-A04
type=logical

[namelist:formulation=si_momentum_equation]
compulsory=true
description=Use a semi-implicit or explicit computation
           =of the momentum equation.
help=Set .true. to use semi-implicit or
    =set .false. to use an explicit treatment
!kind=default
sort-key=Panel-A13
type=logical

[namelist:formulation=use_multires_coupling]
compulsory=true
description=Enable use of multiple resolution meshes for coupling
help=
!kind=default
ns=namelist/Science/Dynamics
sort-key=Panel-A11
trigger=namelist:multires_coupling: .true. ;
type=logical

[namelist:formulation=use_physics]
compulsory=true
description=Use subgrid physics parametrizations or forcing terms
help=Use subgrid physics parametrizations or forcing terms
!kind=default
ns=namelist/Science
sort-key=Panel-A01
trigger=namelist:section_choice=aerosol:            .true. ;
       =namelist:section_choice=boundary_layer:     .true. ;
       =namelist:section_choice=cloud:              .true. ;
       =namelist:section_choice=methane_oxidation:  .true. ;
       =namelist:section_choice=microphysics:       .true. ;
       =namelist:section_choice=orographic_drag:    .true. ;
       =namelist:section_choice=radiation:          .true. ;
       =namelist:section_choice=spectral_gwd:       .true. ;
       =namelist:section_choice=surface:            .true. ;
       =namelist:physics=sample_physics_scalars:    .true. ;
       =namelist:physics=sample_physics_winds:      .true. ;
       =namelist:section_choice=stochastic_physics: .true. ;
type=logical

[namelist:formulation=use_wavedynamics]
compulsory=true
description=??????
help=Use wave dynamics
!kind=default
sort-key=Panel-A05
type=logical

[namelist:formulation=vector_invariant]
compulsory=true
description=Use a vector invariant or advective form
           =for the momentum equation.
help=Set .true. to use vector invariant or
    =set .false. to use advective
!kind=default
sort-key=Panel-A14
type=logical

#==============================================================================
# HELMHOLTZ SOLVER
#==============================================================================
[namelist:helmholtz_solver]
compulsory=true
description=??????
help=This namelist contains the options for the preconditioner (helmholtz) solver
!kind=default
ns=namelist/Science/Dynamics/helmholtz solver
sort-key=Section-A08
title=Pre-conditioner solver

[namelist:helmholtz_solver=diagnostic_norm]
compulsory=true
description=Computes and prints a diagnostic norm before and after preconditioner is called.
help=Print diagnostic residual norm
sort-key=Panel-A06
type=logical

[namelist:helmholtz_solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A06
type=integer

[namelist:helmholtz_solver=method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A01
trigger=namelist:helmholtz_solver=diagnostic_norm: this == "'prec_only'" ;
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi
values='bicgstab', 'cg', 'gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi'

[namelist:helmholtz_solver=normalise]
compulsory=true
description=??????
help=Normalise Helmholtz matrix by its approximate diagonal
!kind=default
sort-key=Panel-A05
type=logical

[namelist:helmholtz_solver=preconditioner]
compulsory=true
description=??????
!enumeration=true
fail-if=this == "'multigrid'" and namelist:formulation=l_multigrid == ".false." ;
help=??????
    =??????
sort-key=Panel-A03
value-titles=None, Diagonal, Tridiagonal, Multigrid
values='none', 'diagonal', 'tridiagonal', 'multigrid'

[namelist:helmholtz_solver=si_pressure_a_tol]
compulsory=true
description=??????
help=Absolute tolerance of semi-implicit pressure solver
!kind=default
sort-key=Panel-A03
type=real

[namelist:helmholtz_solver=si_pressure_maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for si preconditioner solver
!kind=default
range=1:
sort-key=Panel-A04
type=integer

[namelist:helmholtz_solver=si_pressure_tolerance]
compulsory=true
description=??????
help=Relative tolerance of semi-implicit pressure solver
!kind=default
sort-key=Panel-A02
type=real

#==============================================================================
# IDEALISED CASES
#==============================================================================
[namelist:idealised]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions

[namelist:idealised=test]
compulsory=true
description=??????
!enumeration=true
fail-if=this == "'yz_cosine_hill'"    and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'cold_bubble_x'"     and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'cold_bubble_y'"     and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'warm_bubble'"       and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'warm_bubble_3d'"    and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'hadley_like_dcmip'" and namelist:base_mesh=geometry == "'planar'"    ;
       =this == "'held_suarez'"       and namelist:base_mesh=geometry == "'planar'"    ;
       =this == "'earth_like'"        and namelist:base_mesh=geometry == "'planar'"    ;
       =this == "'vortex_field'"      and namelist:base_mesh=geometry == "'planar'"    ;
       =this == "'deep_baroclinic_wave'"    and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'solid_body_rotation'"     and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'solid_body_rotation_alt'" and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'cos_phi'"                 and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'cosine_bell'"             and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'cosine_bubble'"           and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'eternal_fountain'"        and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'curl_free_reversible'"    and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'div_free_reversible'"     and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'translational'"           and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'rotational'"              and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'vertical_cylinder'"       and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'specified_profiles'"      and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'bryan_fritsch'"           and namelist:base_mesh=geometry == "'spherical'";
       =this == "'grabowski_clark'"         and namelist:base_mesh=geometry == "'spherical'";
       =this == "'grabowski_clark'"         and namelist:formulation=moisture_formulation == "'dry'";
help=gravity_wave            : Gravity wave test (planar|spherical)
    =isot_atm                : Isothermal atmosphere
    =isot_mild_atm           : Isothermal atmosphere, mild ground temperature
    =isot_cold_atm           : Isothermal atmosphere, cold ground temperature
    =cold_bubble_x           : Straka density cold current test in x direction (planar)
    =cold_bubble_y           : Straka density cold current test in y direction (planar)
    =const_lapse_rate        : const_lapse_rate : Stratified atmosphere, constant lapse rate
    =warm_bubble             : Warm bubble test (planar)
    =warm_bubble_3d          : 3d Warm bubble test (planar)
    =gaussian_hill           : Pair of Gaussian hills (planar|spherical)
    =cosine_hill             : Pair of cosine hills (planar|spherical)
    =cosine_bell             : Pair of 3D cosine bells (spherical)
    =yz_cosine_hill          : Pair of cosine hills (in a y-z slice of the planar domain)
    =slotted_cylinder        : Pair of slotted cylinders (planar|spherical)
    =constant_field          : Constant density value everywhere (planar|spherical)
    =cosine_stripe           : Cosine profile which is a function of longitude only (planar|spherical)
    =vortex_field            : Pair of vortices (spherical)
    =hadley_like_dcmip       : Hadley-like DCMIP test (spherical)
    =held_suarez             : Held-Suarez idealised initialization
    =earth_like              : Earth-Like idealised initialization
    =solid_body_rotation     : Solid body rotation test
    =solid_body_rotation_alt : Switchable deep/shallow solid body rotation test
    =deep_baroclinic_wave    : Deep atmosphere baroclinic wave (Ullrich 13)
    =isentropic              : Stationary isentropic case
    =dry_cbl                 : Dry convective boundary layer
    =_____________________________________________________________________
    =snow
    = Initialises a GABLS4-inspired snowpack under the atmospheric profile
    = of the dry_cbl test.
    = Test is to check the coupling of the snow scheme against the UM-SCM
    = and has no real scientific meaning.
    =_____________________________________________________________________
    =shallow_conv            : Shallow convection
    =cos_phi                 : Advection of latitudinally varying function
    =cosine_bubble           : Advection of a cosine bubble in an x-z domain
    =eternal_fountain        : A mimic of an eternal fountain
    =curl_free_reversible    : A curl-free reversible flow with high divergence
    =div_free_reversible     : A divergence-free deformative flow
    =translational           : Simple translational flow
    =rotational              : A vertical solid body rotation
    =vertical_cylinder       : A cylinder for a vertical slice
    =specified_profiles      : Use profile data provided by initial namelists
    =bryan_fritsch           : Rising bubble test of Bryan and Fritsch (2002)
    =grabowski_clark         : Rising bubble test of Grabowski and Clark (1991)
sort-key=Panel-A01
trigger=namelist:initial_temperature=profile_data:    'specified_profiles';
       =namelist:initial_temperature=profile_heights: 'specified_profiles';
       =namelist:initial_temperature=profile_size:    'specified_profiles';
       =namelist:initial_vapour=profile_data:         'specified_profiles';
       =namelist:initial_vapour=profile_heights:      'specified_profiles';
       =namelist:initial_vapour=profile_size:         'specified_profiles';
value-titles=None, Gravity Wave, Isothermal atmosphere, Mild ground temperature,
            =Cold ground temperature, Cold bubble x,
            =Cold bubble y, Constant lapse rate, Warm bubble, Warm bubble 3d, Gaussian hill,
            =Cosine hill, Cosine bell 3D, YZ cosine hill, Slotted cylinder, Constant field,
            =Cosine stripe, Hadley like DCMIP, Vortex field, Held-Suarez, Earth-Like, Solid body rotation,
            =Solid body rotation alt, Deep baroclinic wave, Isentropic,
            =Dry convective boundary layer, Shallow Convection,
            =Advection of cos(phi) function, Advection of a cosine bubble, Snow under dry CBL,
            =Eternal fountain, A reversible potential flow, A deformative twisting flow,
            =Uniform translation, Vertical solid body rotation, Cylinder for vertical slice,
            =Specified profiles, Bryan and Fritsch (2002) rising bubble,
            =Grabowski and Clark (1991) moist rising bubble in an unsaturated atmosphere
# initial temp namelists
# XS
# trigger=namelist:initial_density:     'none' ;
#         namelist:initial_temperature: 'none' ;
#         namelist:initial_wind:        'none' ;
values='none', 'gravity_wave', 'isot_atm', 'isot_mild_atm', 'isot_cold_atm', 'cold_bubble_x',
      ='cold_bubble_y', 'const_lapse_rate', 'warm_bubble', 'warm_bubble_3d', 'gaussian_hill',
      ='cosine_hill', 'cosine_bell', 'yz_cosine_hill', 'slotted_cylinder', 'constant_field', 'cosine_stripe',
      ='hadley_like_dcmip', 'vortex_field', 'held_suarez', 'earth_like', 'solid_body_rotation',
      ='solid_body_rotation_alt', 'deep_baroclinic_wave', 'isentropic',
      ='dry_cbl','shallow_conv','cos_phi','cosine_bubble','snow',
      ='eternal_fountain', 'curl_free_reversible', 'div_free_reversible', 'translational',
      ='rotational','vertical_cylinder', 'specified_profiles', 'bryan_fritsch', 'grabowski_clark'

#==============================================================================
# INITIAL DENSITY
#==============================================================================
[namelist:initial_density]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Density
sort-key=Section-A03

[namelist:initial_density=r1]
compulsory=true
description=??????
# fail-if= only valid for certain tests
fail-if=this < 0.0 ;
# Poor, variables should not change units based on other settings!!
help=Radius for one of the pair of initial tracer functions
    =Biperiodic domain: in metres.
    =Cubed sphere domain: in radians.
!kind=default
range=0.0:
#range=
sort-key=Panel-A04
type=real

[namelist:initial_density=r2]
compulsory=true
description=??????
fail-if=
help=Radius parameter for the second of the pair of initial tracer functions (see r1)
!kind=default
!range=
sort-key=Panel-A08
trigger=
type=real

[namelist:initial_density=tracer_background]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Background value of tracer (unclear)
!kind=default
range=0.0:
sort-key=Panel-A03
# This variable is only valid for the following idealised test cases: cosine_hill, yz_cosine_hill,
# slotted_cylinder, cosine_stripe, constant_field
type=real

[namelist:initial_density=tracer_max]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Maximum value of tracer (unclear)
!kind=default
range=0.0:
sort-key=Panel-A02
# trigger= only valid for some of idealised test cases namelist:idelaised=test Add comments as to which
# This variable is only valid for the following idealised test cases: gaussian_hill, cosine_hill,
# yz_cosine_hill, slotted_cylinder, cosine_stripe,
type=real

[namelist:initial_density=x1]
compulsory=true
description=??????
# trigger= only valid for some of idealised test cases namelist:idelaised=test Add comments as to which
# A change in the way it is coded is needed as x1 is required for several of the idealised tests but need
# not be.
# Poor, variables should not change units based on other settings!!
help=Position for one of the pair of initial tracer functions
    =Biperiodic domain: centre of the function given in terms of metres in the chi1 direction.
    =Cubed sphere domain: longitudinal position of the centre of the function (a value between 0 and \f$2\pi\f$).
!kind=default
#range=
sort-key=Panel-A05
trigger=
type=real

[namelist:initial_density=x2]
compulsory=true
description=??????
fail-if=
help=Position parameter for the second of the pair of initial tracer functions (see x1)
!kind=default
!range=
sort-key=Panel-A09
trigger=
type=real

[namelist:initial_density=y1]
compulsory=true
description=??????
fail-if=
# A change in the way it is coded is needed as y1 is required for several of the idealised tests but need
# not be.
# Poor, variables should not change units based on other settings!!
help=Position for one of the pair of initial tracer functions
    =Biperiodic domain: centre of the function given in terms of metres in the chi2 direction.
    =Cubed sphere domain: latitudinal position of the centre of the function (a value between \f$-\pi/2\f$ and \f$\pi/2\f$).
!kind=default
!range=
sort-key=Panel-A06
trigger=
type=real

[namelist:initial_density=y2]
compulsory=true
description=??????
fail-if=
help=Position parameter for the second of the pair of initial tracer functions (see y1)
!kind=default
!range=
sort-key=Panel-A10
trigger=
type=real

[namelist:initial_density=z1]
compulsory=true
description=??????
fail-if=
help=Centre height position for one of the pair of initial tracer functions
!kind=default
!range=
sort-key=Panel-A07
trigger=
# Only valid for yz_cosine_hill
type=real

[namelist:initial_density=z2]
compulsory=true
description=??????
fail-if=
help=Centre height position for one of the pair of initial tracer functions
!kind=default
!range=
sort-key=Panel-A11
# Only valid for yz_cosine_hill
trigger=
type=real

#==============================================================================
# INITIAL PRESSURE
#==============================================================================
[namelist:initial_pressure]
compulsory=true
description=Options for initialising Exner
help=
!kind=default
ns=namelist/Job/Initial conditions/Pressure
sort-key=Section-A02

[namelist:initial_pressure=method]
compulsory=true
description=Method used to initialise Exner
!enumeration=true
help=Three methods are available for idealised initialisation of Exner pressure:
    ='sampled' - analytic function sampled at finite element data points
    ='projected' - analytic function projected onto finite element representation
    ='balanced' - Exner calculated using discrete hydrostatic balance
    =             (only works for element_order=0 until #2304 is implemented)
sort-key=Panel-A01
value-titles=None, Sampled at data points, Projected onto elements, Discrete hydrostatic balance
values='none', 'sampled', 'projected', 'balanced'

[namelist:initial_pressure=surface_pressure]
compulsory=true
description=Pressure at sea level (Pa)
help=Pressure in Pascals at the lower boundary. When orography is present,
    =this is taken to be pressure at sea level.
!kind=default
sort-key=Panel-A02
type=real

#==============================================================================
# INITIAL TEMPERATURE
#==============================================================================
[namelist:initial_temperature]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Temperature
sort-key=Section-A01

[namelist:initial_temperature=bvf_square]
compulsory=true
description=??????
help=The square of Brunt-Vaisala frequency [1/s^2]
!kind=default
sort-key=Panel-A01
type=real

[namelist:initial_temperature=pert_width_scaling]
compulsory=true
description=The scaling applied to the temperature perturbation width.
help=This is designed to allow a smaller perturbation width to be used for a
    =limited area model on one panel, and zero flux LBCs.
!kind=default
sort-key=Panel-A03b
type=real
warn-if=this <= 0.0 ;

[namelist:initial_temperature=perturb]
compulsory=true
description=Add a perturbation to the initial potential temperature
!enumeration=true
help=random - random noise (same on each processor)
sort-key=Panel-A03
value-titles=None, Random
values='none', 'random'

[namelist:initial_temperature=profile_data]
!bounds=namelist:initial_temperature=profile_size
compulsory=true
description=Initial temperature profile
help=Values of potential temperature (Kelvin) at heights specified in profile_heights.
!kind=default
length=:
range=0.0:
sort-key=Panel-A04b
type=real

[namelist:initial_temperature=profile_heights]
!bounds=namelist:initial_temperature=profile_size
compulsory=true
description=Heights for temperature profile
help=Heights, in metres, at which temperature data are specified.
!kind=default
length=:
range=0.0:
sort-key=Panel-A04c
type=real

[namelist:initial_temperature=profile_size]
compulsory=true
description=Size of initial profile
help=Number of data points in the initial profile.
!kind=default
range=0:100
sort-key=Panel-A04a
type=integer

[namelist:initial_temperature=theta_surf]
compulsory=true
description=??????
help=Value of temperature at z=0
!kind=default
range=0.0:
sort-key=Panel-A02
type=real
warn-if=this <= 0.0 ;

#==============================================================================
[namelist:initial_vapour]
compulsory=true
description=Initialisation of the water vapour field
help=Options for idealised initialisation of water vapour
!kind=default
ns=namelist/Job/Initial conditions/Vapour
sort-key=Section-A03

[namelist:initial_vapour=profile_data]
!bounds=namelist:initial_vapour=profile_size
compulsory=true
description=Initial vapour profile
help=Values specifying mixing ratio (kg/kg) of water vapour at heights specified
    =in profile_heights.
!kind=default
length=:
range=0.0:
sort-key=Panel-A03
type=real

[namelist:initial_vapour=profile_heights]
!bounds=namelist:initial_vapour=profile_size
compulsory=true
description=Nodal heights for vapour profile
help=Heights, in metres, of nodes for specifying a vapour profile
!kind=default
length=:
range=0.0:
sort-key=Panel-A04
type=real

[namelist:initial_vapour=profile_size]
compulsory=true
description=Number of points in initial vapour profile
help=Number of data points in the initial profile
!kind=default
range=0:100
sort-key=Panel-A02
type=integer

#==============================================================================
[namelist:initial_wind]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Wind
sort-key=Section-A04

[namelist:initial_wind=nl_constant]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A07
type=real

[namelist:initial_wind=profile]
compulsory=true
description=Initial wind profiles for GungHo and Transport Miniapp tests.
!enumeration=true
fail-if=this == "'sbr_with_vertical'"    and namelist:base_mesh=geometry != "'spherical'" ;
       =this == "'dcmip_101'"            and namelist:base_mesh=geometry != "'spherical'" ;
       =this == "'vertical_deformation'" and namelist:base_mesh=geometry != "'spherical'" ;
help=Select the initial wind profiles for the GungHo and Transport miniapp test cases.
    =Solid body rotation with vertical wind:        Standard horizontal SBR with a vertical translation.
    =DCMIP 2012 Test 1.1:                           From Kent et al. 2014, it uses the Nair-Lauritzen
    =test 4 deformational flow in the horizontal, and a vertical translation. Ony suitable for spherical geometry.
    =Vertical Deformational Flow:                   Uses the Nair-Lauritzen test 4 deformational flow in the
    =longitude-height plane. Ony suitable for spherical geometry.
# Add help description of different values
sort-key=Panel-A01
value-titles=None, Solid body rotation, Solid body rotation-alt, Constant uv, Constant shear uv,
            =Sin wave uv, DCMIP 3.0.1, Deep baroclinic-steady, Deep baroclinic-perturbed,
            =NL case-1, NL case-2, NL case-3, NL case-4, xy NL case-1, yz NL case-1,
            =Hadley like DCMIP, Vortex,
            =Solid body rotation-Streamfunction, DCMIP 3.0.1-Streamfunction, Eternal fountain,
            =Reversible curl free, Reversible divergence free, Vertical solid body rotation,
            =Solid body rotation with vertical wind, DCMIP 2012 Test 1.1, Vertical Deformational Flow
# PLEASE add coments to indicate which of these values should allowed given
# the value of namelist:idealised=test
# the value of the mesh geometry
values='none', 'solid_body_rotation', 'solid_body_rotation_alt', 'constant_uv', 'constant_shear_uv',
      ='sin_uv','dcmip301', 'deep_baroclinic_steady', 'deep_baroclinic_perturbed',
      ='NL_case_1', 'NL_case_2', 'NL_case_3', 'NL_case_4', 'xy_NL_case_1', 'yz_NL_case_1',
      ='hadley_like_dcmip', 'vortex', 'sbr_streamfunction', 'dcmip301_streamfunction', 'eternal_fountain',
      ='curl_free_reversible', 'div_free_reversible', 'rotational',
      ='sbr_with_vertical','dcmip_101', 'vertical_deformation'

[namelist:initial_wind=sbr_angle_lat]
#Units? Degrees radians []??
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A04
type=real

[namelist:initial_wind=sbr_angle_lon]
#Units? Degrees radians []??
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A05
type=real

[namelist:initial_wind=shear]
compulsory=false
description=Shear value used to initialise wind
help=This value is used to initialise constant_shear_uv
    =Wind profile is computed using:
    =u(z) = u0*z/shear
!kind=default
sort-key=Panel-A09
type=real

[namelist:initial_wind=smp_init_wind]
compulsory=true
description=sample initial wind or not.
help=??????
    =??????
!kind=default
sort-key=Panel-A08
type=logical

[namelist:initial_wind=u0]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A02
type=real

[namelist:initial_wind=v0]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A03
type=real

[namelist:initial_wind=wavelength]
compulsory=false
description=Wavelength used in sin_uv wind profile
help=Wavelength for sin uv profile
    =Wind profile is computed using:
    =u(z) = u0*sin(2pi*k_z), where k_z = 2*pi/wavelength
!kind=default
sort-key=Panel-A10
type=real

[namelist:initial_wind=wind_time_period]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=??????
    =??????
!kind=default
range=0.0:
sort-key=Panel-A06
type=real

#==============================================================================
# Field Initialization
#==============================================================================
[namelist:initialization]
compulsory=true
description=Sets up options for field initialization
help=??????
    =??????
ns=namelist/Job/IO/Field Initialisation
sort-key=sec-AAAA

[namelist:initialization=ancil_option]
compulsory=true
description=Where from and how to process ancillary data
!enumeration=true
!fail-if=this='fixed' and namelist:orography=orog_init_option != 'ancil'
        =this='updating' and namelist:orography=orog_init_option != 'ancil'
help=start_dump will process some ancillary information from the start dump.
    = This is useful for aquaplanet runs.
    =
    =fixed will read the ancillary files and interpolate the data to the
    = start date of the model, holding it fixed after this.
    = This is typically how forecast runs are done.
    =
    =updating is as fixed, but will additionally update the ancillary data
    = as the run progresses.
    = This is typically how climate runs are done.
    =
    =Both the fixed and updating options require the orography to be configured
    = from file via the orog_init_option setting. All ancils are read from the
    = same directory path.
sort-key=01
trigger=namelist:files=land_area_ancil_path: 'fixed', 'updating' ;
       =namelist:files=soil_ancil_path: 'fixed', 'updating' ;
       =namelist:files=aerosols_ancil_path: 'fixed' ;
       =namelist:files=plant_func_ancil_path: 'fixed', 'updating' ;
       =namelist:files=sea_ancil_path: 'fixed', 'updating' ;
       =namelist:files=sst_ancil_path: 'fixed', 'updating' ;
       =namelist:files=sea_ice_ancil_path: 'fixed', 'updating' ;
       =namelist:files=albedo_vis_ancil_path: 'fixed', 'updating' ;
       =namelist:files=albedo_nir_ancil_path: 'fixed', 'updating' ;
       =namelist:files=hydtop_ancil_path: 'fixed', 'updating' ;
       =namelist:files=ozone_ancil_path: 'fixed', 'updating' ;
       =namelist:files=surface_frac_ancil_path: 'fixed', 'updating' ;
       =namelist:files=emiss_bc_biofuel_ancil_path: 'updating' ;
       =namelist:files=emiss_bc_fossil_ancil_path: 'updating' ;
       =namelist:files=emiss_bc_biomass_ancil_path: 'updating' ;
       =namelist:files=emiss_dms_land_ancil_path: 'updating' ;
       =namelist:files=dms_conc_ocean_ancil_path: 'updating' ;
       =namelist:files=emiss_monoterp_ancil_path: 'updating' ;
       =namelist:files=emiss_om_biofuel_ancil_path: 'updating' ;
       =namelist:files=emiss_om_fossil_ancil_path: 'updating' ;
       =namelist:files=emiss_om_biomass_ancil_path: 'updating' ;
       =namelist:files=emiss_so2_low_ancil_path: 'updating' ;
       =namelist:files=emiss_so2_high_ancil_path: 'updating' ;
       =namelist:files=emiss_so2_nat_ancil_path: 'updating' ;
       =namelist:files=h2o2_limit_ancil_path: 'updating' ;
       =namelist:files=ho2_ancil_path: 'updating' ;
       =namelist:files=no3_ancil_path: 'updating' ;
       =namelist:files=o3_ancil_path: 'updating' ;
       =namelist:files=oh_ancil_path: 'updating' ;
       =namelist:files=soil_dust_ancil_path: 'updating' ;
values='none', 'start_dump', 'fixed', 'updating'

[namelist:initialization=hydro_coriolis]
# If further studies show that the addition of the coriolis term always
# gives benefit, then the switch can be removed, so that the coriolis term
# is always included.
compulsory=true
!default=kind
description=Add Coriolis terms to the vertical balance.
help=Coriolis terms are including when generating the vertical profile of exner.
    =This is a temporary switch required for basic-gal development.
sort-key=02
type=logical

[namelist:initialization=init_option]
compulsory=true
description=Choice for initialization of model fields
!enumeration=true
!fail-if=this='checkpoint_dump' and namelist:io=checkpoint_read==.false.
help=Choose how to initialize the model fields:
    = 'analytic'        : Initialization is taken from analytic fields.  See
    =                     the appropriate related namelists for choices available.
    = 'checkpoint_dump' : Initialize the model from a checkpoint from a previous
    =lfric run.
    = 'fd_start_dump'   : Initialize fields from a start dump file on disk.
    =The data in this file will be used to populate finite
    =difference fields, i.e. physics fields from which the
    =model will run.
    = 'fe_start_dump'   : Initialize fields from a start dump file on disk.  The
    =data in this file will be used to populate finite element
    =fields, i.e. gungho dynamics fields from which the model
    =will run. NOT CURRENTLY IMPLEMENTED
sort-key=01
trigger=namelist:initialization=hydro_coriolis: 'fd_start_dump', 'fe_start_dump' ;
values='analytic', 'checkpoint_dump', 'fd_start_dump', 'fe_start_dump'

[namelist:initialization=lbc_option]
compulsory=true
description=Choice of which lateral boundary conditions to read in.
!enumeration=true
fail-if=this=='gungho_file' and namelist:boundaries=limited_area !="'.true.'" ;
       =this=='um2lfric_file' and namelist:boundaries=limited_area !="'.true.'" ;
       =this=='analytic' and namelist:boundaries=limited_area !="'.true.'"
help=Currently support is only available for:
    ='none', 'analytic','gungho_file', 'um2lfric_file'
sort-key=01
trigger=namelist:files=lbc_directory: 'file', 'gungho_file',  'um2lfric_file';
       =namelist:files=lbc_filename: 'gungho_file', 'um2lfric_file' ;
values='none', 'analytic', 'gungho_file', 'um2lfric_file'

[namelist:initialization=ls_option]
compulsory=true
description=Choice of which linearisation state.
!enumeration=true
help=Currently support is only available for:
    ='none', 'analytic','file'
sort-key=01
trigger=namelist:files=ls_directory: 'file' ;
       =namelist:files=ls_filename:  'file' ;
values='none', 'analytic', 'file'

[namelist:initialization=read_w2h_wind]
compulsory=true
!default=kind
description=Horizontal winds are read in on a W2h space from a start dump.  If
           = false, then cell-centres (W3), co-located winds are assumed.
help=Horizontal winds are read in on a W2h space from a start dump.  If
    = false, then cell-centres (W3), co-located winds are assumed.
sort-key=02
type=logical

#==============================================================================
# IO
#==============================================================================
[namelist:io=write_conservation_diag]
compulsory=true
description=Enable write of conservation diagnostics for masses, energy and axial ang. mom.
help=Writes out conservation diagnostics to the job log. These are the totals of
    =dry mass, energy and axial angular momentum. In the presence of moisture,
    =the total mass of each species of moisture is also written out as well as
    =the masses of water associated with fluxes from precipitation and the boundary layer.
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A05
type=logical

[namelist:io=write_diag]
trigger=namelist:io=diagnostic_frequency: .true. ;
       =namelist:io=nodal_output_on_w3:   .true. ;
       =namelist:io=write_minmax_tseries: .true. ;
       =namelist:files=diag_stem_name:    .true. ;

[namelist:io=write_dump]
compulsory=true
description=Enable dump of a field
help=Write a dump of a field
!kind=default
ns=namelist/Job/IO/Dumping
sort-key=A-001
type=logical

[namelist:io=write_fluxes]
compulsory=true
description=Write out fluxes for vector fields
help=In addition to outputting u1,u2 and u3, output fluxes on w2h and wtheta
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A04
type=logical

[namelist:io=write_minmax_tseries]
compulsory=true
description=Enable write of maxima and minima
           =of fields for time-series.
help=Writes out a min/max of fields to text file
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A05
type=logical

#==============================================================================
# OUTER SOLVER
#==============================================================================
[namelist:mixed_solver]
compulsory=true
description=??????
help=This namelist is for the mixed (outer) si solver
ns=namelist/Science/Dynamics/mixed_solver
sort-key=Section-A07
title=Outer solver

[namelist:mixed_solver=eliminate_variables]
compulsory=true
description=Eliminate the density and potential temperature from the mixed solver.
!enumeration=true
help=Eliminate the density and potential temperature from the mixed solver using
    =either discrete or analytic elimination or retain the full mixed system
    =(no elimination). See solver documentation of
    =https://code.metoffice.gov.uk/trac/lfric/wiki/GhaspSupport/Documentation
    =for further details.
!kind=default
sort-key=Panel-A07
value-titles=None, Discrete, Analytic
values='none', 'discrete', 'analytic'

[namelist:mixed_solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A05
type=integer

[namelist:mixed_solver=guess_np1]
compulsory=true
description=??????
help=Guess values for theta, rho and exner n+1 in inner loop
!kind=default
sort-key=Panel-A06
type=logical

[namelist:mixed_solver=mixed_solver_a_tol]
compulsory=true
description=Sets the absolute tolerance of semi-implicit solver.
help=Absolute tolerance of semi-implicit solver
    =Safe value is (\f$10^{-6}\f$), but optimal value may depend
    =on model configuration.
!kind=default
range=0:1
sort-key=Panel-A02
type=real

[namelist:mixed_solver=normalise]
compulsory=true
description=??????
help=Normalise matrix so diagonal is 1
!kind=default
sort-key=Panel-A08
type=logical

[namelist:mixed_solver=reference_reset_freq]
compulsory=true
description=??????
fail-if=this < 1 ;
help=frequency (number of si iterations) to reset reference state
!kind=default
range=1:
sort-key=Panel-A07
type=integer

[namelist:mixed_solver=si_diagnostic_norm]
compulsory=true
description=Computes and prints a diagnostic norm before and after preconditioner is called.
help=Print diagnostic residual norm
sort-key=Panel-A06
type=logical

[namelist:mixed_solver=si_maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for si solver
!kind=default
range=1:
sort-key=Panel-A04
type=integer

[namelist:mixed_solver=si_method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
!kind=default
sort-key=Panel-A01
trigger=namelist:mixed_solver=si_diagnostic_norm: this == "'prec_only'" ;
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized conjugate residual(block form),
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi
values='bicgstab', 'cg', 'gcr', 'block_gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi'

[namelist:mixed_solver=si_preconditioner]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
!kind=default
sort-key=Panel-A03
value-titles=None, Diagonal, Pressure
values='none', 'diagonal', 'pressure'

[namelist:mixed_solver=si_tolerance]
compulsory=true
description=??????
help=Relative tolerance of semi-implicit solver
!kind=default
sort-key=Panel-A02
type=real

[namelist:mixed_solver=split_w]
compulsory=true
description=Split vertical and horizontal components of velocity field in solve
help=???
!kind=default
sort-key=Panel-A06
type=logical

[namelist:mixing]
compulsory=true
description=Subgrid mixing scheme options
help=Currently available schemes are:
    =_________________________________________________________________
    =Constant viscosity:
    =  applied to theta & u, v, w
    =_________________________________________________________________
    =Smagorinsky mixing scheme:
    =  applied to theta, moisture (water vapour and cloud liquid),
    =  u, v and w
    =_________________________________________________________________
    =Vertical Leonard terms:
    =  turbulent vertical fluxes due to the Leonard terms
    =  calculated for liquid water temperature, total water content,
    =  u, v and w
    =  This scheme can be used with the Smagorinsky mixing scheme
    =
!kind=default
ns=namelist/Science/Dynamics/Mixing
sort-key=Section-A05

[namelist:mixing=leonard_kl]
compulsory=true
description=Leonard term parameter
help=Scales the Leonard term fluxes applied to winds and scalars.
    =  A value of 1.0 yields just the Leonard term.
    =
    =  Values in the range 1-6 are justified, as Moeng et al (2010)
    =  found that a significant fraction of other turbulent flux terms are
    =  highly correlated with the Leonard term.
!kind=default
sort-key=Panel-A07
type=real

[namelist:mixing=leonard_term]
compulsory=true
description=Enable vertical Leonard terms
help=Calculate turbulent vertical fluxes due to Leonard terms,
    =  as described in Moeng et al (2010).
    =
    =  Fluxes are calculated for:
    =  Liquid water temperature
    =  Total water content
    =  u, v and w
    =
!kind=default
sort-key=Panel-A06
trigger=namelist:mixing=leonard_kl: .true. ;
type=logical

[namelist:mixing=method]
compulsory=true
description=Smagorinsky subgrid mixing scheme option
!enumeration=true
help=Options for Smagorinsky subgrid mixing scheme:
    =_________________________________________________________________
    =3D Smag
    =  Smagorinsky mixing scheme applied in horizontal and vertical.
    =_________________________________________________________________
    =2D Smag + 1D BL
    =  Smagorinsky mixing scheme applied in horizontal.
    =  1D BL scheme used in the vertical.
    =_________________________________________________________________
    =Blended scheme
    =  Blended BL-Smagorinsky diffusion coefficient used for
    =  subgrid mixing in horizontal and vertical.
    =
    =  WARNING: This option currently does not conserve energy and as
    =  a result may be unstable.
sort-key=Panel-A05
value-titles=3D Smagorinsky, 2D Smagorinsky + 1D BL, Blended scheme
values='3d_smag', '2d_smag', 'blending'

[namelist:mixing=mix_factor]
compulsory=true
description=Smagorinsky mixing length constant
help=Smagorinsky mixing length constant, typical value is 0.2
!kind=default
sort-key=Panel-A04
type=real

[namelist:mixing=smagorinsky]
compulsory=true
description=Enable Smagorinsky mixing
help=Apply Smagorinsky mixing to theta,
    =  moisture (water vapour and cloud liquid), u, v and w
    =
    =  NOTE: As in the current UM implementation of Smagorinsky mixing,
    =  the stress terms have been implemented purely as diffusion terms.
    =  This results in a missing term, as described in UMDP28.
    =
    =  WARNING: Current implementation assumes a Cartesian mesh.
!kind=default
sort-key=Panel-A03
trigger=namelist:mixing=method:     .true. ;
       =namelist:mixing=mix_factor: .true. ;
       =namelist:physics=smagorinsky_placement: .true. ;
type=logical

#==============================================================================
# MIXING: Namelist Members
#==============================================================================
[namelist:mixing=viscosity]
compulsory=true
description=??????
help=Apply constant viscosity to theta & u, v, w
!kind=default
sort-key=Panel-A01
type=logical

[namelist:mixing=viscosity_mu]
compulsory=true
description=??????
help=Viscosity constant to use
!kind=default
sort-key=Panel-A02
type=real

#==============================================================================
# MULTIRESOLUTION COUPLING (e.g. Physics-Dynamics-Chemistry)
#==============================================================================
[namelist:multires_coupling]
compulsory=false
description=This namelist specifies options for running different model
           =components on different meshes
help=This namelist provides different modes and meshes for running the coupling
    =miniapp
ns=namelist/Science/Dynamics/multires_coupling
sort-key=Section-A07
title=Multires-Coupling

[namelist:multires_coupling=dynamics_mesh_name]
compulsory=false
description=Tag-name for mesh used by dyanamics
help=This is the mesh on which the dynamical core is run
sort-key=Panel-A02
!string_length=default
type=character

[namelist:multires_coupling=multires_coupling_mesh_tags]
compulsory=false
description=List of mesh tag-names for the meshes used in the coupling miniapp
help=This is an ordered list of mesh names as loaded from the mesh
    =input file for the coupling miniapp. It is expected that the mesh
    =input file will contain the required intergrid maps between the meshes
length=:
sort-key=Panel-A01
!string_length=default
type=character

[namelist:multires_coupling=multires_coupling_mode]
compulsory=false
description=Describes the mode in which the coupling miniapp will be run
!enumeration=true
help=Test - a simple test case to test miniapp capabilities
    =Jnr-Snr - dynamics and physics at a fine resolution coupled
    =with dynamics, physics and chemistry at a coarse resolution
    =Physics-Dynamics - physics and dynamics run at different resolutions
    =and coupled together
sort-key=Panel-A05
value-titles=Test, Jnr-Snr, Physics-Dynamics
values='test', 'jnr_snr', 'physics_dynamics'

[namelist:multires_coupling=physics_mesh_name]
compulsory=false
description=Tag-name for mesh used by physics
help=This is the mesh on which the physics parametrisations are run
sort-key=Panel-A04
!string_length=default
type=character

#==============================================================================
# ORBIT
#==============================================================================
[namelist:orbit]
compulsory=true
description=Orbital elements
ns=namelist/Model/Planet/Orbit
sort-key=Section-A05
title=Orbit

[namelist:orbit=arg_periapsis]
compulsory=true
description=Argument of periapsis [radians]
help=The angle between the ascending node and the periapsis (anticlockwise).
    =
    =The ascending node in this context is the point in the orbit where the
    =planet passes through its autumn equinox for the northern hemisphere.
    =The direction from the star to planet at this point in the orbit is the
    =zero of the reference frame used here for the orbital elements.
    =This direction is also where the host star appears in the sky as viewed
    =from the planet at its northern hemisphere spring equinox. For the Earth
    =this is known as the First Point of Aries.
    =(Note, for a planet with zero obliquity, this zero direction is
    =arbitrarily defined.)
    =
    =The periapsis is the point of closest approach in the planet's
    =elliptical orbit. For a circular orbit it is undefined
    =(can be set to zero.)
    =
    =As we are using the ascending node as the zero point for the reference
    =frame here, then by definition, the longitude of the ascending node is
    =zero, and the argument of periapsis is equal to the longitude of
    =periapsis. For a planet around the sun this is known as the longitude
    =of perihelion.
sort-key=Panel-A06
type=real

[namelist:orbit=arg_periapsis_inc]
compulsory=true
description=Increment to the argument of periapsis
           =per Julian day from epoch [radians/day]
sort-key=Panel-A07
type=real

[namelist:orbit=eccentricity]
compulsory=true
description=Orbital Eccentricity [unitless]
help=The orbital eccentricity determines the amount by which the orbit
    =deviates from a perfect circle. A value of 0 is a circular orbit,
    =values between 0 and 1 form an elliptic orbit, 1 is a parabolic
    =escape orbit, and greater than 1 is a hyperbola.
range=0.0:1.0
sort-key=Panel-A04
type=real

[namelist:orbit=eccentricity_inc]
compulsory=true
description=Increment to eccentricity
           =per Julian day from epoch [/day]
sort-key=Panel-A05
type=real

[namelist:orbit=elements]
compulsory=true
description=Orbital parameters
!enumeration=true
help=Parameters for the planet's orbit may be user-defined
    =or given by the following presets:
    =_________________________________________________________________
    =Earth: Fixed
    =  A standard Earth orbit that does not vary from one year to the next.
    =  The day number of the passage through perihelion is set to a mean
    =  value for the years 1995-2005.
    =  As the orbit is reset at the beginning of each year there will be a
    =  slight discontinuity in the orbital position. The epoch used is
    =  therefore always midday on the first day of the current year.
    =  The orbital elements used are taken from JPL and the Astronomical
    =  Almanac (1984) and equivalent to:
    =    eccentricity = 1.6710222E-02
    =    eccentricity_inc = 0.0
    =    arg_periapsis = 1.796767421
    =    arg_periapsis_inc = 0.0
    =    obliquity = 0.409092804
    =    obliquity_inc = 0.0
    =    semimajor_axis = 1.0
    =    semimajor_axis_inc = 0.0
    =    mean_anomaly = -0.037278428
    =    mean_anomaly_inc = 0.01720278179
    =    hour_angle = 0.0
    =_________________________________________________________________
    =Earth: Secular variation
    =  An Earth orbit with secular variations of the orbital elements
    =  described by A. L. Berger (1978), J. Atm. Sci., vol 35, p. 2362.
    =  These use higher order terms than the simple linear increments
    =  available with the user defined orbital elements.
sort-key=Panel-A01
trigger=namelist:orbit=epoch: 'user' ;
       =namelist:orbit=eccentricity: 'user' ;
       =namelist:orbit=eccentricity_inc: 'user' ;
       =namelist:orbit=arg_periapsis: 'user' ;
       =namelist:orbit=arg_periapsis_inc: 'user' ;
       =namelist:orbit=obliquity: 'user' ;
       =namelist:orbit=obliquity_inc: 'user' ;
       =namelist:orbit=semimajor_axis: 'user' ;
       =namelist:orbit=semimajor_axis_inc: 'user' ;
       =namelist:orbit=mean_anomaly: 'user' ;
       =namelist:orbit=mean_anomaly_inc: 'user' ;
       =namelist:orbit=hour_angle: 'user' ;
value-titles=User defined, Earth: Fixed, Earth: Secular variation
values='user', 'earth_fixed', 'earth_secular_variation'

[namelist:orbit=epoch]
compulsory=true
description=Reference date in Julian Days [days]
help=The Julian day number on which the specified orbital elements
    =apply. The increments are then the change in these orbital
    =elements per Julian day from the given epoch.
    =
    =The J2000 epoch is specified by the Julian day number 2451545.0
    =which equates to midday on the 1st January 2000.
sort-key=Panel-A03
type=real

[namelist:orbit=fixed_azimuth_angle]
compulsory=true
description=Fixed stellar azimuth angle
           =measured clockwise from north [radians]
help=This is an idealised setting where the solar / stellar azimuth angle
    =will be the same for all points in the model. This overrides the
    =angles calculated from the orbital elements but retains the distance
    =of the planet from the host star.
sort-key=Panel-A17
type=real

[namelist:orbit=fixed_zenith_angle]
compulsory=true
description=Fixed stellar zenith angle for all points
           =[radians]
help=This is an idealised setting where the solar / stellar zenith angle
    =will be the same for all points in the model. This overrides the
    =angles calculated from the orbital elements but retains the distance
    =of the planet from the host star.
sort-key=Panel-A16
type=real

[namelist:orbit=hour_angle]
compulsory=true
description=Hour angle at epoch [radians]
help=The fraction of the planet's day since the host star was over
    =the planet's prime meridian expressed as a fraction of a circle
    =in radians. For the Earth, this is the angle the Sun has moved
    =westwards since solar noon.
    =
    =This is the hour angle at the time of the given epoch.
sort-key=Panel-A14
type=real

[namelist:orbit=hour_angle_inc]
compulsory=true
description=Increment to hour angle
           =per Julian day from epoch [radians/day]
help=This equates to 2*pi times the length of the planet's day over the
    =length of a Julian day.
sort-key=Panel-A15
type=real

[namelist:orbit=mean_anomaly]
compulsory=true
description=Mean anomaly at epoch [radians]
help=The fraction of the orbital period since passage through periapsis
    =expressed as a fraction of a circle in radians. If the orbit were
    =completely circular then this would describe the actual angular
    =position of the planet in the orbit (the true anomaly).
    =
    =This is the mean anomaly at the time of the given epoch.
sort-key=Panel-A12
type=real

[namelist:orbit=mean_anomaly_inc]
compulsory=true
description=Increment to mean anomaly
           =per Julian day from epoch [radians/day]
help=This equates to 2*pi over the orbital period in Julian days.
sort-key=Panel-A13
type=real

[namelist:orbit=obliquity]
compulsory=true
description=Obliquity of the orbit [radians]
help=The angle between the rotational axis of the planet and the orbital axis,
    =where the direction is defined so the rotation is in the same sense (i.e.
    =anticlockwise).
sort-key=Panel-A08
type=real

[namelist:orbit=obliquity_inc]
compulsory=true
description=Increment to obliquity of the orbit
           =per Julian day from epoch [radians/day]
sort-key=Panel-A09
type=real

[namelist:orbit=observer_lat]
compulsory=true
description=Orbital latitude of observer [radians]
help=Describes the angle from the plane of the planet's orbit to the
    =position of a distant observer. Used for the calculation of diagnostics.
sort-key=Panel-A19
type=real

[namelist:orbit=observer_lon]
compulsory=true
description=Orbital longitude of observer [radians]
help=Describes the orbital angle (anticlockwise) from the ascending node
    =of the planet's orbit to the position of a distant observer. Used
    =for the calculation of diagnostics.
sort-key=Panel-A18
type=real

[namelist:orbit=semimajor_axis]
compulsory=true
description=Semi-major axis [AU]
help=One half of the major axis of the orbit, equivalent to the average
    =between the orbital distance at periapsis and apoapsis (perihelion
    =and aphelion for orbits around the Sun). For the Earth this was
    =originally defined as 1 AU (astronomical unit), but 1 AU is now
    =defined as exactly 149597870700 metres.
sort-key=Panel-A10
type=real

[namelist:orbit=semimajor_axis_inc]
compulsory=true
description=Increment to semi-major axis
           =per Julian day from epoch [AU/day]
sort-key=Panel-A11
type=real

[namelist:orbit=spin]
compulsory=true
description=Treatment of stellar motion
           =from planet's surface
!enumeration=true
help=The change in the hour angle of the sun as viewed from the
    =planet's surface over the course of the day.
    =This may be user defined or given by the following presets:
    =_________________________________________________________________
    =Earth Day
    =  hour_angle_inc = exactly 2*pi
    =  The sun appears to make a full circuit in exactly one Earth day.
    =  This setting avoids any numerical drift due to an inexact user
    =  setting of 2*pi.
    =_________________________________________________________________
    =Fixed Sun
    =  The position of the sun in the sky is fixed for all points.
    =  The solar zenith and azimuth angles are user supplied.
sort-key=Panel-A02
trigger=namelist:orbit=hour_angle_inc: 'user' ;
       =namelist:orbit=fixed_zenith_angle: 'fixed_sun' ;
       =namelist:orbit=fixed_azimuth_angle: 'fixed_sun' ;
value-titles=User defined, Earth Day, Fixed Sun
values='user', 'earth_day', 'fixed_sun'

#==============================================================================
# OROGRAPHY
#==============================================================================
[namelist:orography]
compulsory=true
description=Settings for the selected analytic orography profiles.
help=Settings for the Schar, Witch-of-Agnesi, Bell-shaped and DCMIP 2.0.0 analytic
    =orography profiles in Cartesian and spherical coordinates (only Cartesian
    =for Bell-shaped and only spherical for DCMIP 2.0.0 profile).
ns=namelist/Model/Planet/Orography
sort-key=Panel-A02

[namelist:orography=orog_init_option]
compulsory=true
description=Choice for initialization of orography fields
!enumeration=true
fail-if=this=='analytic' and namelist:orography=profile=="'none'" ;
       =this=='ancil' and namelist:io=use_xios_io==".false."
help=Choose how to initialize the orography fields:
    = 'analytic'        : Initialization is performed analytically. Profile must be
    =                     set in the orography namelist option.
    = 'ancil'           : Initialize the orography from an ancillary file. Must be
    =                     used with xios.
sort-key=Panel-A02
trigger=namelist:files=orography_ancil_path: 'ancil' ;
       =namelist:files=ancil_directory: 'ancil' ;
       =namelist:orography=profile: 'analytic' ;
       =namelist:extrusion=stretching_method: this != 'none';
values='none', 'analytic', 'ancil'

[namelist:orography=profile]
compulsory=true
description=orography profile
!enumeration=true
fail-if=this == "'dcmip200'" and namelist:base_mesh=geometry        != "'spherical'" ;
       =this == "'bell'" and namelist:base_mesh=geometry            != "'planar'"    ;
       =this == "'none'" and namelist:orography=orog_init_option    == "'analytic'"  ;
help=none     : No orography (flat surface)
    =schar    : Schar mountain profile
    =agnesi   : Witch-of-Agnesi mountain profile
    =dcmip200 : DCMIP 2.0.0 mountain orography
    =bell     : Bell-shaped mountain profile
sort-key=Panel-A02
trigger=namelist:orography_agnesi_cartesian:   'agnesi'   ;
       =namelist:orography_agnesi_spherical:   'agnesi'   ;
       =namelist:orography_bell_cartesian:     'bell'     ;
       =namelist:orography_dcmip200_spherical: 'dcmip200' ;
       =namelist:orography_schar_cartesian:    'schar'    ;
       =namelist:orography_schar_spherical:    'schar'    ;
value-titles=None, Agnesi, Bell-shaped, Schar, DCMIP 2.0.0
values='none', 'agnesi', 'bell', 'schar', 'dcmip200'

#==============================================================================
# OROGRAPHY (AGNESI CARTESIAN)
#==============================================================================
[namelist:orography_agnesi_cartesian]
compulsory=true
description=Witch-of-Agnesi orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Witch-of-Agnesi mountain function
    =in Cartesian biperiodic domain in x and/or y directions.
    =Reference: Melvin et al. (2010), Section 4.3.
ns=namelist/Model/Planet/Agnesi cartesian
sort-key=Section-A03
title=Agnesi cartesian profile

[namelist:orography_agnesi_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_agnesi_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_agnesi_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_agnesi_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_agnesi_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_agnesi_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (AGNESI SPHERICAL)
#==============================================================================
[namelist:orography_agnesi_spherical]
compulsory=true
description=Witch-of-Agnesi orography profile in spherical coordinates.
help=Settings for analytic orography profile of Witch-of-Agnesi mountain function
    =in spherical domain. Reference: Wedi and Smolarkiewicz (2009), Section 4.1.
ns=namelist/Model/Planet/Agnesi spherical
sort-key=Section-A03
title=Agnesi spherical profile

[namelist:orography_agnesi_spherical=half_width]
compulsory=true
description=Half-width of mountain [m]
fail-if=this < 0.0
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[!namelist:orography_agnesi_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_agnesi_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A04
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[!namelist:orography_agnesi_spherical=lambda_focus]
compulsory=false
description=Latitude of mountain focus [radian]
expression=namelist:orography_agnesi_spherical=lambda_focus_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=lambda_focus_dec]
compulsory=true
description=Latitude of mountain focus unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A06
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[namelist:orography_agnesi_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_agnesi_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_agnesi_spherical=phi_centre_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[!namelist:orography_agnesi_spherical=phi_focus]
compulsory=false
description=Longitude of mountain focus [radian]
expression=namelist:orography_agnesi_spherical=phi_focus_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=phi_focus_dec]
compulsory=true
description=Longitude of mountain focus unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A05
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

#==============================================================================
# OROGRAPHY (BELL CARTESIAN)
#==============================================================================
[namelist:orography_bell_cartesian]
compulsory=true
description=Bell-Shaped orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Bell-shaped mountain function
    =in Cartesian biperiodic domain in x and/or y directions.
    =Reference: Lock et al. (2012), Section 3.b.
ns=namelist/Model/Planet/Bell cartesian
sort-key=Section-A03
title=Bell cartesian profile

[namelist:orography_bell_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Lock et al. (2012), Section 3.b. for the analytic form.
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_bell_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_bell_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_bell_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_bell_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_bell_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (DCMIP 2.0.0 SPHERICAL)
#==============================================================================
[namelist:orography_dcmip200_spherical]
compulsory=true
description=DCMIP 2.0.0 orography profile in spherical coordinates.
help=Settings for analytic orography profile of DCMIP 2.0.0 mountain function
    =in spherical domain.
    =Reference: Ullrich et al. (2012) DCMIP documentation, Section 2.0.
ns=namelist/Model/Planet/DCMIP2.0.0 spherical
sort-key=Section-A03
title=DCMIP spherical profile

[!namelist:orography_dcmip200_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_dcmip200_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A04
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[namelist:orography_dcmip200_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_dcmip200_spherical=osc_half_width]
compulsory=false
description=Oscillation half-width of mountain function [radian]
expression=namelist:orography_dcmip200_spherical=osc_half_width_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=osc_half_width_dec]
compulsory=true
description=Oscillation half-width of mountain function unscaled by PI
fail-if=this < 0.0
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A05
type=real

[!namelist:orography_dcmip200_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_dcmip200_spherical=phi_centre_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[!namelist:orography_dcmip200_spherical=radius]
compulsory=false
description=Mountain radius [radian]
expression=namelist:orography_dcmip200_spherical=radius_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=radius_dec]
compulsory=true
description=Mountain radius unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A02
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

#==============================================================================
# OROGRAPHY (SCHAR CARTESIAN)
#==============================================================================
[namelist:orography_schar_cartesian]
compulsory=true
description=Schar orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Schar mountain function
    =in spherical domain. Reference: Melvin et al. (2010), Section 4.4.
ns=namelist/Model/Planet/Schar cartesian
sort-key=Section-A03
title=Schar cartesian profile

[namelist:orography_schar_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_schar_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_schar_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_schar_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_schar_cartesian=wavelength]
compulsory=true
description=Wavelength of Cos part of mountain function [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A07
type=real

[namelist:orography_schar_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_schar_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (SCHAR SPHERICAL)
#==============================================================================
[namelist:orography_schar_spherical]
compulsory=true
description=Schar orography profile in spherical coordinates.
help=Settings for analytic orography profile of Schar mountain function
    =in spherical domain. Reference: Wood et al. (2013), Section 7.1.
ns=namelist/Model/Planet/Schar spherical
sort-key=Section-A03
title=Schar spherical profile

[namelist:orography_schar_spherical=half_width]
compulsory=true
description=Half-width of mountain [m]
fail-if=this < 0.0
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[!namelist:orography_schar_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_schar_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
type=real

[namelist:orography_schar_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A04
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[namelist:orography_schar_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_schar_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_schar_spherical=phi_centre_dec * source:constants_mod=PI
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
type=real

[namelist:orography_schar_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[namelist:orography_schar_spherical=wavelength]
compulsory=true
description=Wavelength of Cos part of mountain function [m]
fail-if=this < 0.0
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A07
type=real

#==============================================================================
# PHYSICS SECTION
#==============================================================================
[namelist:physics]
compulsory=true
description=Options for physics parametrizations
help=The placement variables indicate where a given physics routine is placed:
    =if > 0: then placement is in fast physics
    =if =0: then routine is not called
    =if < 0: then placement is in slow physics
ns=namelist/Science

[namelist:physics=blayer_placement]
compulsory=true
description=Boundary layer placement
!enumeration=true
help=Determines where the boundary layer scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A03
value-titles=Fast physics, Slow physics
values='fast','slow'

[namelist:physics=convection_placement]
compulsory=true
description=Convection placement
!enumeration=true
help=Determines where the convection scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A04
value-titles=Fast physics, Slow physics
values='fast','slow'

[namelist:physics=lowest_level]
compulsory=true
description=Option for updating lowest wtheta level prognostics
!enumeration=true
help=Physics codes typically only operate from the 1st wtheta level upwards.
    = Hence we need to provide updates to the 0th wtheta level somehow.
    = 3 options are available:
    =
    =Constant value: This forces the value of fields
    = to be held constant below level 1. This is physically unrealistic
    = and only provided for testing consistency with ENDGame.
    =
    =Constant gradient: Extrapolate the gradient between level 2 and level 1
    = to obtain the level 0 value, i.e.
    = theta(z0) = theta(z1) - z1*(theta(z2)-theta(z1))/(z2-z1).
    =
    =Constant flux: Obtain the value at the surface using the surface
    = fluxes from the bounary layer scheme, i.e.
    = theta(z0) = theta(z1) + ftl/(cp*rhokh),
    = where ftl is the surface heat flux and kh is the eddy diffusivity.
!kind=default
ns=namelist/Science/Physics mapping
sort-key=Section-A03
value-titles=Constant value,Constant gradient,Constant flux
values='constant','gradient','flux'

[namelist:physics=microphysics_placement]
compulsory=true
description=Microphysics placement
!enumeration=true
help=Determines where the microphysics scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A05
value-titles=Slow\ physics
values='slow'

[namelist:physics=orographic_drag_placement]
compulsory=true
description=Orographic drag placement
!enumeration=true
help=Determines where the orographic drag scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A06
value-titles=Slow\ physics
values='slow'

[namelist:physics=radiation_placement]
compulsory=true
description=Radiative transfer placement
!enumeration=true
help=Determines where the radiation transfer scheme is called from.
ns=namelist/Science/Timestep placement
sort-key=Panel-A07
value-titles=Slow\ physics
values='slow'

[namelist:physics=sample_physics_scalars]
compulsory=true
description=Switch to sample rho, theta and exner at physics locations
help=If true then sample rho, theta and exner at physics locations, else use a
    =  Galerkin projection
!kind=default
ns=namelist/Science/Physics mapping
sort-key=Section-A01
type=logical

[namelist:physics=sample_physics_winds]
compulsory=true
description=Switch to sample FE winds at physics locations
help=If true then sample FE winds at physics locations, else use a
    =  Galerkin projection
!kind=default
ns=namelist/Science/Physics mapping
sort-key=Section-A02
type=logical

[namelist:physics=smagorinsky_placement]
compulsory=true
description=Smagorinsky placement
!enumeration=true
help=Determines where the Smagorinsky mixing scheme is called from.
    =Fast => from the fast physics predictors, equivalent to where the
    =        vertical mixing happens
    =Outer => from the state variables in the dynamics outer-loop
    =         equivalent to the UM
    =End => at the end of the timestep, after the solver
ns=namelist/Science/Timestep placement
sort-key=Panel-A09
value-titles=Fast physics,Outer loop,Timestep end
values='fast','outer','end'

[namelist:physics=spectral_gwd_placement]
compulsory=true
description=Spectral gravity wave drag placement
!enumeration=true
help=Determines where the spectral gravity wave drag scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A08
value-titles=Slow\ physics
values='slow'

[namelist:physics=stochastic_physics_placement]
compulsory=true
description=stochastic_physics placement
!enumeration=true
help=Determines where the stochastic physics schemes are called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A15
value-titles=Fast\ physics
values='fast'

#==============================================================================
# PLANET
#==============================================================================
[namelist:planet=cp]
compulsory=true
description=[J/(kg K)]
fail-if=this <= 0.0 ;
help=Specific heat of dry air at constant pressure [J/(kg K)]
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A05
type=real

[!namelist:planet=cv]
compulsory=false
expression=namelist:planet=cp - namelist:planet=rd
help=Specific heat of dry air at constant volume [J/(kg K)]
!kind=default
type=real

[!namelist:planet=epsilon]
compulsory=false
description=Ratio of molecular weights: dry air / water
expression=namelist:planet=rd / source:driver_water_constants_mod=gas_constant_h2o
help=Molecular weight of water divided by molecular weight of dry air.
    =[dimensionless]
!kind=default
type=real

[namelist:planet=gravity]
compulsory=true
description=[m/(s^2)]
fail-if=this <= 0.0 ;
help=Surface equatorial value of gravity [m/s^2]
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:planet=kappa]
compulsory=false
expression=namelist:planet=rd / namelist:planet=cp
help=Ratio of Rd and Cp [dimensionless]
!kind=default
type=real

[namelist:planet=omega]
compulsory=true
description=[radians/second]
help=Planetary angular rotation rate.
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A03
type=real

[!namelist:planet=one_over_kappa]
compulsory=false
expression=namelist:planet=cp / namelist:planet=rd
help=Inverse ratio of Rd and Cp [dimensionless]
!kind=default
type=real

[namelist:planet=p_zero]
compulsory=true
description=[Pa]
help=Reference surface pressure [Pa]
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A06
type=real

[namelist:planet=radius]
compulsory=true
description=[m]
fail-if=this <= 0.0 ;
help=??????
    =??????
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A02
type=real

[namelist:planet=rd]
compulsory=true
description=[J/(kg K)]
help=Gas constant for dry air [J/(kg K)]
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A04
type=real

[!namelist:planet=recip_epsilon]
compulsory=false
expression=source:driver_water_constants_mod=gas_constant_h2o / namelist:planet=rd
help=Reciprocal of ratio molecular mass of water to dry air.
    =[dimensionless]
!kind=default
type=real

[!namelist:planet=scaled_omega]
compulsory=false
expression=namelist:planet=omega * namelist:planet=scaling_factor
help=??????
    =??????
!kind=default
type=real

#==============================================================================
# Secion choice namelist
#==============================================================================
[namelist:section_choice]
compulsory=true
description=Specify section choices for this configuration.
ns=namelist/Science/section choice
sort-key=Section-A01

[namelist:section_choice=aerosol]
compulsory=true
description=Which aerosol scheme to use
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics  == ".false." ;
help=The following aerosol options are available from the aerosol namelist
    = GLOMAP-mode climatology
    =
    =Note that only one of these aerosol options can be used at a time.
sort-key=Panel-A01
trigger=namelist:aerosol: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=boundary_layer]
compulsory=true
description=Which boundary layer turbulence parametrization to use
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Either the boundary layer can be switched off and no surface drag applied,
    =or the UM scheme based on Lock et al (2000 MWR) can be used.
sort-key=Panel-A02
trigger=namelist:physics=blayer_placement: this != "'none'" ;
       =namelist:physics=lowest_level: this == "'um'" ;
       =namelist:section_choice=convection: this != "'none'" ;
       =namelist:blayer: this == "'um'" ;
       =namelist:mixing=method: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=cloud]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics  == ".false." ;
       =this != "'none'" and namelist:formulation=moisture_formulation == "'dry'" ;
help=??????
    =??????
sort-key=Panel-A03
trigger=namelist:cloud: this == "'um'" ;
       =namelist:section_choice=microphysics: this != "'none'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=convection]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false."  ;
       =this != "'none'" and namelist:section_choice=boundary_layer == "'none'" ;
help=??????
    =??????
sort-key=Panel-A04
trigger=namelist:physics=convection_placement: this != "'none'" ;
       =namelist:convection=cv_scheme: this == "'um'" ;
       =namelist:cloud=mphys_erosion: this == "'none'";
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=dynamics]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_wavedynamics == ".false." ;
help=??????
    =??????
sort-key=Panel-A05
value-titles=None, GungHo
values='none', 'gungho'

[namelist:section_choice=external_forcing]
compulsory=true
description=Use external forcing of thermodynamic variables
sort-key=Panel-A12
trigger=namelist:external_forcing: .true.;
type=logical

[namelist:section_choice=methane_oxidation]
compulsory=true
description=Use methane oxidation
help=Selecting methane_oxidation allows the calculation of
    =chemical water vapour change due to methane oxidation and photolysis,
    =following the method used at ECMWF (Untch et al (ECMWF Newsletter No
    =87 winter 1998/99 pp 2-8) and Simmons (pers. comm.)). The model
    =methane mixing ratio is implicit and derived from the assumption that
    =2 [CH4] + [H2O] = 3.75 ppmm throughout the stratosphere.
    =
    =The methane oxidation and hydrogen photolysis rate coefficients vary
    =only with pressure, which is calculated for a standard atmosphere
    =assuming a surface pressure of namelist:planet=p_zero.
sort-key=Panel-A11
type=logical

[namelist:section_choice=microphysics]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
       =this != "'none'" and namelist:section_choice=cloud == "'none'" ;
help=??????
    =??????
sort-key=Panel-A06
trigger=namelist:physics=microphysics_placement: this != "'none'" ;
       =namelist:microphysics: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=orographic_drag]
compulsory=true
description=Orographic drag scheme
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Orographic drag scheme
    ======================================
    =Accounts for drag forces on the atmosphere due to interaction
    =with sub-grid mountains.
    =
    =Options are:
    =_________________________________________________________________
    =None:
    =  No orographic drag scheme applied.
    =_________________________________________________________________
    =UM:
    =  The orographic drag scheme from the Unified Model.
    =
    =  This scheme is based on the Lott and Miller (1997) parametrization and
    =  includes drag contributions from low-level flow blocking and
    =  orographic gravity waves. It accounts for sub-grid orography of
    =  horizontal scales larger than 6 km (i.e. hydrostatic scales).
    =  (see UM Documentation paper, UMDP022).
sort-key=Panel-A07
trigger=namelist:physics=orographic_drag_placement: this != "'none'" ;
       =namelist:orographic_drag:                   this == "'um'"   ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=radiation]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=??????
    =??????
sort-key=Panel-A08
trigger=namelist:radiation:                   this == "'socrates'" ;
       =namelist:physics=radiation_placement: this != "'none'"     ;
       =namelist:orbit:                       this != "'none'"     ;
       =namelist:star:                        this != "'none'"     ;
value-titles=None, SOCRATES
values='none', 'socrates'

[namelist:section_choice=spectral_gwd]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Spectral gravity wave drag scheme
    ======================================
    =Accounts for drag forces on the atmosphere due to non-orographic
    =gravity wave sources.
    =
    =Options are:
    =_________________________________________________________________
    =None:
    =  No spectral gravity wave drag scheme applied.
    =_________________________________________________________________
    =UM:
    =  The Ultra Simple Spectral Parametrization (USSP) of gravity wave drag
    =  from the Unified Model.
    =
    =  The approach taken is that of Warner and McIntyre (1996), Warner and
    =  McIntyre (1999) and Warner and McIntyre (2001) with further
    =  modifications (Scaife et al., 2002; Scaife et al., 2000).
    =
    =  The scheme includes an option for convective gravity wave sources.
    =
    =  See UM documentation page 034 (UMDP034).
sort-key=Panel-A09
trigger=namelist:physics=spectral_gwd_placement: this != "'none'" ;
       =namelist:spectral_gwd:                   this == "'um'"   ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=stochastic_physics]
compulsory=true
description=Sets of Stochastic Physics to use
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false."  ;
       =this != "'none'" and namelist:section_choice=stochastic_physics == "'none'" ;
help=UM:
    = The Stochastic Perturbation of Tendencies (SPT)
sort-key=Panel-A15
trigger=namelist:physics=stochastic_physics_placement: this != "'none'" ;
       =namelist:stochastic_physics: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=surface]
compulsory=true
description=Which surface scheme to use
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Currently Jules is the only surface scheme available for use
sort-key=Panel-A10
trigger=namelist:surface: this == "'jules'" ;
       =namelist:jules_nvegparm: this == "'jules'" ;
       =namelist:jules_surface: this == "'jules'" ;
       =namelist:jules_surface_types: this == "'jules'" ;
       =namelist:jules_vegetation: this == "'jules'" ;
       =namelist:convection=use_jules_flux: this == "'jules'" ;
value-titles=None, JULES
values='none','jules'

#==============================================================================
# MASS MATRIX SOLVER
#==============================================================================
[namelist:solver]
compulsory=true
description=??????
help=This namelist is for using iteratives solvers for the inversion of mass matrices
ns=namelist/Science/Dynamics/Mass Matrix Solver
sort-key=Section-A04

[namelist:solver=diagnostic_norm]
compulsory=true
description=Computes and prints a diagnostic norm before and after preconditioner is called.
help=Print diagnostic residual norm
sort-key=Panel-A06
type=logical

[namelist:solver=fixed_iterations]
compulsory=true
description=If instead of iterating so an error is below the tolerance, specify a total number of iterations
           =to perform before assuming the solver has converged
fail-if=this < 1 ;
help=Number of iterations to perform if not iterating to convergence
!kind=default
range=1:
sort-key=Panel-A08
type=integer

[namelist:solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A05
type=integer

[namelist:solver=maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for solver
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:solver=method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A01
trigger=namelist:solver=diagnostic_norm: this == "'prec_only'" ;
       =namelist:solver=diagnostic_norm: this == "'chebyshev'" ;
       =namelist:solver=fixed_iterations: this == "'chebyshev'" ;
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi,
            =chebyshev
values='bicgstab', 'cg', 'gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi', 'chebyshev'

[namelist:solver=preconditioner]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A04
value-titles=None, Diagonal
values='none', 'diagonal'

[namelist:solver=tolerance]
compulsory=true
description=??????
help=Relative tolerance of solver
!kind=default
sort-key=Panel-A03
type=real

#==============================================================================
# STAR
#==============================================================================
[namelist:star]
compulsory=true
description=Properties of host star
ns=namelist/Model/Planet/Star
sort-key=Section-A04
title=Star

[namelist:star=stellar_constant]
compulsory=true
description=Stellar irradiance at 1 AU [Wm-2]
help=The flux received from the host star at a distance of 1 astronomical unit.
    =For the Sun, this is the "Solar constant".
sort-key=Panel-A01
type=real

[namelist:star=stellar_radius]
compulsory=true
description=Radius of host star [m]
help=Radius at the photosphere of the host star used for the calculation
    =of diagnostics.
sort-key=Panel-A02
type=real

#==============================================================================
# SUBGRID
#==============================================================================
[namelist:subgrid]
compulsory=true
description=Options for subgrid reconstruction for FFSL transport.
help=??????
    =??????
ns=namelist/Science/Dynamics/Subgrid
sort-key=Section-A09

[namelist:subgrid=calculate_detj]
compulsory=true
description=Method to compute Det(J) at W2 DoFs used in vertical departure point calculations.
!enumeration=true
help=Det(J) at W2 DoFs is used to compute the vertical departure points for the
    =FFSL and semi-Lagrangian transport schemes. To compute Det(J) at vertical W2
    =points we choose either an average of Det(J) from neighbouring cells, or
    =use Det(J) from the upwind cell.
sort-key=Panel-A06
value-titles=Averaged Det(J), Upwind Det(J)
values='averaged', 'upwind'

[namelist:subgrid=dep_pt_stencil_extent]
compulsory=true
description=Extent of horizontal departure point calculations.
fail-if=this < 1 ;
help=Used in calculating the number of horizontal grid cells the
    =departure points can extend over.
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:subgrid=rho_approximation]
compulsory=true
description=Method for FFSL subgrid reconstruction.
!enumeration=true
help=Choose the method to compute the subgrid reconstruction for FFSL transport.
    =Constant  Represent field within a grid cell as a constant value, resulting
    =in a 1st order spatial scheme.
    =Constant Positive  Constant reconstruction, but ensures the field values are positive.
    =PPM No Limiter  Uses the Piecewise Parabolic Method (PPM, Colella and Woodward, JCP, 1984)
    =to reconstruct the field as a parabola within a cell, results in a 3rd order spatial scheme.
    =No limiter is applied to the reconstruction.
    =PPM Positive Only  PPM reconstruction with positivity constraint applied.
    =PPM Positive Monotone  PPM reconstruction with both positivity and monotonicity applied.
sort-key=Panel-A01
value-titles=constant_subgrid, constant_positive, ppm_no_limiter, ppm_positive_only,
            =ppm_positive_monotone
values='constant_subgrid', 'constant_positive', 'ppm_no_limiter', 'ppm_positive_only',
      ='ppm_positive_monotone'

[namelist:subgrid=rho_approximation_stencil_extent]
compulsory=true
description=Size of stencil required for the subgrid reconstruction.
fail-if=this < 0 ;
help=This must take the value 0 for the constant reconstruction, and the value
    =2 for PPM reconstruction.
!kind=default
# This value (at the moment) should only take the values 0 or 2.
# rho_approximation_stencil_extent should equal 0 if constant_subgrid or
# constant_positive are chosen
# rho_approximation_stencil_extent should equal 2 otherwise, i.e. if ppm_no_limiter
# ppm_positive_only or ppm_positive_monotone are chosen
range=0:
sort-key=Panel-A03
type=integer

#==============================================================================
# TIMESTEPPING
#==============================================================================
[namelist:timestepping=alpha]
compulsory=true
description=??????
help=Time off-centering parameter
!kind=default
sort-key=Panel-A03
type=real

[!namelist:timestepping=beta]
compulsory=false
expression=1.0_r_def - namelist:timestepping=alpha
help=??????
    =??????
!kind=default
type=real

[namelist:timestepping=inner_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Number of inner (Newton) iterations to do
!kind=default
range=1:
sort-key=Panel-A08
type=integer

[namelist:timestepping=method]
compulsory=true
description=Use either explicit Runge-Kutta timestepping or (iterative-) Semi-Implicit scheme
!enumeration=true
help=Set the timestepping method for the GungHo dynamical core, either a fully explicit multi-stage
    =Runge-Kutta method ('rk') or an (iterative-) Semi-Implicit scheme ('semi_implicit').
    =It is also possible to set 'no_timestepping'. There are no calls to dynamics or physics and the prognostic fields remain the same. However, time-varying fields such as ancillaries, and LBCs are still updated on each timestep, and diagnostics are output.
    ='no_timestepping' is intended as a temporary switch required for basic-ral development.
    =But it may also be useful for testing the tangent linear in 4DVar.
sort-key=Panel-A01
trigger=namelist:timestepping=tau_u: 'semi_implicit', 'no_timestepping' ;
       =namelist:timestepping=tau_t: 'semi_implicit' ;
       =namelist:timestepping=tau_r: 'semi_implicit' ;
       =semi-implicit:               'semi_implicit' ;
       =namelist:timestepping=outer_iterations: 'semi_implicit' ;
       =namelist:timestepping=inner_iterations: 'semi_implicit' ;
value-titles=Semi-implicit, Runge-Kutta, No-timestepping
values='semi_implicit', 'rk', 'no_timestepping'

[namelist:timestepping=outer_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Number of outer (advection) iterations to do
!kind=default
range=1:
sort-key=Panel-A07
type=integer

[namelist:timestepping=runge_kutta_method]
compulsory=true
description=?????
!enumeration=true
fail-if=
help=?????
    =?????
ns=namelist/Job/Timestepping/runge kutta
sort-key=Panel-A01
value-titles=Foward Euler,
            =Stong Stability Preserving: Order-2,
            =Stong Stability Preserving: Order-3,
            =Stong Stability Preserving: Order-4,
            =Stong Stability Preserving: Order-5
values='forward_euler', 'ssp2', 'ssp3', 'ssp4', 'ssp5'

[namelist:timestepping=spinup_alpha]
compulsory=true
description=??????
help=If true then spin up alpha over the spin up period
!kind=default
sort-key=Panel-A11
type=logical

[namelist:timestepping=spinup_winds]
compulsory=true
description=??????
help=If true then don't update winds over the spin up period
!kind=default
sort-key=Panel-A12
type=logical

[namelist:timestepping=tau_r]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for density in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A06
type=real

[namelist:timestepping=tau_t]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for potential temperature in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A05
type=real

[namelist:timestepping=tau_u]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for velocity in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A04
type=real

#==============================================================================
# TRANSPORT
#==============================================================================
[namelist:transport]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/Transport
sort-key=Section-A10

[namelist:transport=cfl_mol_1d_stab]
compulsory=false
description=Max stability Courant number for 1D-MOL (One-Dimensional Method of Line).
fail-if=this < 0.0 ;
range=1.0:
sort-key=Panel-A01
type=real

[namelist:transport=cfl_mol_2d_stab]
compulsory=false
description=Max stability Courant number for 2D-MOL (2-Dimensional Method of Line).
fail-if=this < 0.0 ;
range=1.0:
sort-key=Panel-A01
type=real

[namelist:transport=cfl_mol_3d_stab]
compulsory=false
description=Max stability Courant number for 3D-MOL (3-Dimensional Method of Line).
fail-if=this < 0.0 ;
range=0.5:
sort-key=Panel-A01
type=real

[namelist:transport=consistent_metric]
compulsory=true
description=??????
fail-if=
help=Compute metric terms with the advection scheme
!kind=default
sort-key=Panel-A05
trigger=
type=logical

[namelist:transport=dry_field_name]
compulsory=false
description=Name of the dry field used for conservative tracer transport
fail-if=
help=This must be the name of one of the other transported fields
sort-key=Panel-A06
!string_length=default
type=character

[namelist:transport=enforce_min_value]
!bounds=namelist:transport=profile_size
compulsory=true
description=Enforce a minimum value for the transported field
help=
!kind=default
length=:
sort-key=Panel-A04c
type=logical

[namelist:transport=ffsl_advective_splitting]
compulsory=true
description=Splitting option for advective form FFSL scheme.
!enumeration=true
fail-if=
help=timesplit_vertical : A first-order splitting method between horizontal and vertical.
    =                   : 2D Cosmic splitting is used for the horizontal which is then
    =                   : joined with the vertical via a time split approach.
    =
    =macho              : MACHO splitting is a second-order method which uses the increment
    =                   : from a step in one-dimension to create the step in the next dimension
    =                   : (and so on). It uses the fewest number of steps of the second-order
    =                   : methods, and therefore has the lowest computational cost.
    =                   : MACHO splitting is from Leonard et al. (1996).
    =
    =afc                : Asymmetrical Flux Calculation (AFC) splitting. This is a second-order
    =                   : method based on the full COSMIC splitting (see below) but
    =                   : uses asymmetrical advective increments to reduce the computational cost.
    =                   : The AFC idea is described in Kent (2019).
    =
    =full               : Full 3D COSMIC splitting. This second-order method is fully
    =                   : symmetrical for 3D flow. The advective increment from one direction is used
    =                   : to compute the advective increment in a second direction. This (along with
    =                   : the advective increment with the order reversed) is then used to compute
    =                   : the advecitve increment in the third direction. Full splitting has a greater
    =                   : computational cost than the other options.
    =                   : The COSMIC splitting, also known as the Lin-Rood method,
    =                   : is from Leonard et al. (1996) and Lin and Rood (1996).
sort-key=Panel-A01
value-titles=timesplit_vertical, macho, afc, full
values='timesplit_vertical', 'macho', 'afc', 'full'

[namelist:transport=ffsl_flux_splitting]
compulsory=true
description=Splitting option for flux form FFSL scheme.
!enumeration=true
fail-if=
help=timesplit_vertical : A first-order splitting method between horizontal and vertical.
    =                   : 2D Cosmic splitting is used for the horizontal which is then
    =                   : joined with the vertical via a time split approach. As the
    =                   : horizontal flux is used to calculate the vertical flux, this
    =                   : method does not preserve a constant field under divergent-free flow.
    =
    =macho              : MACHO splitting is a second-order method which uses the increment
    =                   : from a step in one-dimension to create the step in the next dimension
    =                   : (and so on). This splitting uses advective steps to calculate the final
    =                   : fluxes, and therefore preserves a constant field under divergent-free flow.
    =                   : It uses the fewest number of steps of the second-order methods, and therefore
    =                   : has the lowest computational cost.
    =                   : MACHO splitting is from Leonard et al. (1996).
    =
    =afc                : Asymmetrical Flux Calculation (AFC) splitting. This is a second-order
    =                   : method based on the full COSMIC splitting (see below) but
    =                   : uses asymmetrical fluxes to reduce the computational cost. As advective
    =                   : steps are used to calculate the final fluxes, AFC splitting preserves a
    =                   : constant field under divergent-free flow. The AFC idea is described in
    =                   : Kent (2019).
    =
    =full               : Full 3D COSMIC splitting. This second-order method is fully
    =                   : symmetrical for 3D flow. The advective increment from one direction is used
    =                   : to compute the advective increment in a second direction. This (along with
    =                   : the advective increment with the order reversed) is then used to compute
    =                   : the flux in the third direction. This is repeated to compute the fluxes
    =                   : in all three dimensions, and ensures the preservation of a constant field under
    =                   : divergent-free flow. The COSMIC splitting, also known as the Lin-Rood
    =                   : method, is from Leonard et al. (1996) and Lin and Rood (1996).
sort-key=Panel-A01
value-titles=timesplit_vertical, macho, afc, full
values='timesplit_vertical', 'macho', 'afc', 'full'

[namelist:transport=ffsl_scheme]
compulsory=true
description=Which underlying code structure to use for the FFSL scheme
!enumeration=true
fail-if=this == "'yz_bip'" and namelist:base_mesh=geometry == "'spherical'"
help=3D                   : 3D FFSL transport for biperiodic and cubed-sphere mesh
    =horizontal           : Cosmic transport scheme in the horizontal
    =YZ (biperiodic-only) : Cosmic transport scheme for a Y-Z slice
sort-key=Panel-A01
trigger=namelist:transport=ffsl_flux_splitting:      this == "'three_dim'" ;
       =namelist:transport=ffsl_advective_splitting: this == "'three_dim'" ;
value-titles=3D, horizontal,  YZ (biperiodic)
values='three_dim', 'horz', 'yz_bip'

[namelist:transport=field_names]
!bounds=namelist:transport=profile_size
compulsory=true
description=Names of advected fields / groups
fail-if=len(this) != namelist:transport=profile_size ;
help=
length=:
sort-key=Panel-A04
!string_length=default
type=character

[namelist:transport=fv_horizontal_order]
compulsory=true
description=Order of polynomials to use for the horizontal reconstruction
           =in the MoL scheme
fail-if=
help=??????
    =??????
!kind=default
!range=
sort-key=Panel-A03
trigger=
type=integer

[namelist:transport=fv_vertical_order]
compulsory=true
description=Order of polynomials to use for the vertical reconstruction
           =in the MoL scheme
fail-if=
help=??????
    =??????
!kind=default
!range=
sort-key=Panel-A04
# This option should only be triggered if transport scheme is method_of_lines
trigger=
type=integer

[namelist:transport=horizontal_method]
!bounds=namelist:transport=profile_size
compulsory=true
description=Horizontal method to use
fail-if=
help=This should be an enumerated types but enumerated type arrays are not supported.
    = The options are  0 = 'null', 1 = 'mol', 2 = 'ffsl'
!kind=default
length=:
sort-key=Panel-A04b
type=integer

[namelist:transport=log_space]
!bounds=namelist:transport=profile_size
compulsory=true
description=Perform vertical interpolation in log space
help=
!kind=default
length=:
sort-key=Panel-A04c
type=logical

[namelist:transport=max_vert_cfl_calc]
compulsory=true
description=Method to compute the maximum vertical CFL used for substepping the MoL scheme.
!enumeration=true
fail-if=this=="'dep_point'" and namelist:subgrid=calculate_detj=="'averaged'"
help=uniform        : sets CFL=w dt/dz. This does not take into account the
    =                 vertical grid spacing away from the cell (i.e. it assumes
    =                 a uniform vertical extrusion).
    =departure point: uses the vertical departure point calculation to set
    =                 the maximum CFL. The departure point is calculated using
    =                 the physical vertical grid and so the vertical grid spacing
    =                 is taken into account.
sort-key=Panel-A01
value-titles=uniform, departure point
values='uniform', 'dep_point'

[namelist:transport=min_value]
!bounds=namelist:transport=profile_size
compulsory=true
description=The minimum value imposed for the transported field
help=
!kind=default
length=:
sort-key=Panel-A04c
type=real

[namelist:transport=moisture_eqn]
compulsory=false
description=Defines which form of the transport equation to use for moisture
!enumeration=true
fail-if=
help=advective    : Use advective form of the transport equation
    =conservative : Use conservative form of the transport equation, and
    =               transport moisture variables as densities on the shifted
    =               mesh.
    =consistent   : Use conservative form of the transport equation. Moisture
    =               is transported as a density on the shifted mesh, but by a
    =               flux evaluated from the dry flux and the mixing ratio.
sort-key=Panel-A06
value-titles=Advective, Conservative, Consistent
values='advective', 'conservative', 'consistent'

[namelist:transport=monotone]
!bounds=namelist:transport=profile_size
compulsory=true
description=Apply monotone limiter to fields
help=This should be an enumerated types but enumerated type arrays are not supported.
    = The options are 1 = 'none', 2 = 'clipping', 3 = 'koren scheme'
!kind=default
length=:
sort-key=Panel-A04c
type=integer

[namelist:transport=oned_reconstruction]
compulsory=true
description=Control use of 1D or 2D polynomial reconstruction of tracer fields
           =for the method of lines advection scheme
fail-if=
help=Use 1D or 2D horizontal reconstruction
!kind=default
sort-key=Panel-A07
# This option should only be triggered if transport scheme is method_of_lines
trigger=
type=logical

[namelist:transport=operators]
compulsory=true
description=Use finite volume (lowest order only) or finite element
           =operators to compute the spatial reconstruction in the mol scheme
!enumeration=true
fail-if=this=="'fv'" and namelist:finite_element=element_order > 0
help=??????
    =??????
sort-key=Panel-A02
# This option should only be triggered if transport scheme is method_of_lines
trigger=
value-titles=Finite volume, Finite element
values='fv', 'fem'

[namelist:transport=profile_size]
compulsory=true
description=Number of transport schemes to define
help=Number of transport schemes to define
!kind=default
range=0:100
sort-key=Panel-A02
type=integer

[namelist:transport=reversible]
!bounds=namelist:transport=profile_size
compulsory=true
description=Use a reversible transport scheme
help=Use Hermite polynomials rather than Lagrange polynomials for the
    =reconstructions used in the vertical SL or MoL transport schemes. By
    =using this polynomial, the reconstruction will be independent of the
    =vertical velocity. When used with vertical MoL transport, this Hermite
    =polynomial only appears in the final Runge-Kutta stage.
!kind=default
length=:
sort-key=Panel-A04c
type=logical

[namelist:transport=runge_kutta_method]
compulsory=true
description=Runge Kutta method to use the MoL scheme
!enumeration=true
fail-if=
help=Runge-Kutta method to use for the method of lines
    =transport scheme. A variety of Strong Stability Preserving (SSP)
    =methods with different orders of accuracy and CFL limit
    =are available along with a forward Euler method which should be
    =used for explicit timestepping methods
ns=namelist/Job/Transport/runge kutta
sort-key=Panel-A01
value-titles=Foward Euler,
            =Strong Stability Preserving: Order-2,
            =Strong Stability Preserving: Order-3,
            =Strong Stability Preserving: Order-4,
            =Strong Stability Preserving: Order-5
values='forward_euler', 'ssp2', 'ssp3', 'ssp4', 'ssp5'

[namelist:transport=scheme]
!bounds=namelist:transport=profile_size
compulsory=true
description=Transport scheme to use
fail-if=
help=This should be an enumerated types but enumerated type arrays are not supported.
    = The options are 1 = 'mol', 2 = 'ffsl', 3 = 'split'
!kind=default
length=:
sort-key=Panel-A04b
type=integer

[namelist:transport=slice_order]
compulsory=false
description=Order of the polynomial used for the reconstruction in slice-remapping.
!enumeration=true
fail-if=
help=constant  : Constant piecewise reconstruction
    =linear    : Linear piecewise reconstruction
    =parabola  : Parabolic piecewise reconstruction
    =cubic     : Cubic piecewise reconstruction
sort-key=Panel-A01
value-titles=constant, linear, parabola, cubic
values='constant', 'linear', 'parabola','cubic'

[namelist:transport=splitting]
!bounds=namelist:transport=profile_size
compulsory=true
description=Directional splitting to use.
fail-if=
help=This should be an enumerated types but enumerated type arrays are not supported.
    =The options are 1 = 'none', 2 = 'strang_vhv', 3 = 'strang_hvh', 4 = 'vh', 5 = 'hv'
!kind=default
length=:
sort-key=Panel-A04b
type=integer

[namelist:transport=use_density_predictor]
compulsory=true
description=DEPRECATED If set to true, then the divergence term will be included
           =in the transport of density
help=Use predictor for density for improved stability of SI timestep
!kind=default
sort-key=Panel-A05
type=logical

[namelist:transport=vertical_method]
!bounds=namelist:transport=profile_size
compulsory=true
description=Vertical method to use
fail-if=
help=This should be an enumerated types but enumerated type arrays are not supported.
    = The options are 0 = 'null', 1 = 'mol', 2 = 'ffsl', 3 = 'sl'
!kind=default
length=:
sort-key=Panel-A04b
type=integer

[namelist:transport=vertical_sl_order]
compulsory=false
description=Order of the polynomial used for the vertical semi-lagrangian.
!enumeration=true
fail-if=
help=cubic     : Cubic interpolation
    =quintic   : Quintic interpolation
sort-key=Panel-A01
value-titles=cubic, quintic
values='cubic','quintic'

#==============================================================================
# WELL MIXED GASES
#==============================================================================
[namelist:well_mixed_gases]
compulsory=true
description=Mass mixing ratios of gases [kg/kg]
help=Mass mixing ratios to be used for all points and all levels
    =where a gas is considered well-mixed in the atmosphere.
ns=namelist/Model/Planet/Atmospheric gases
sort-key=Section-A01
title=Atmospheric gases

[namelist:well_mixed_gases=cfc113_mix_ratio]
compulsory=true
description=CFC-113 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A09
type=real

[namelist:well_mixed_gases=cfc11_mix_ratio]
compulsory=true
description=CFC-11 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A07
type=real

[namelist:well_mixed_gases=cfc12_mix_ratio]
compulsory=true
description=CFC-12 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A08
type=real

[namelist:well_mixed_gases=ch4_mix_ratio]
compulsory=true
description=CH4 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A03
type=real

[namelist:well_mixed_gases=co2_mix_ratio]
compulsory=true
description=CO2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A01
type=real

[namelist:well_mixed_gases=hcfc22_mix_ratio]
compulsory=true
description=HCFC-22 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A10
type=real

[namelist:well_mixed_gases=hfc134a_mix_ratio]
compulsory=true
description=HFC-134a mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A11
type=real

[namelist:well_mixed_gases=n2_mix_ratio]
compulsory=true
description=N2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A05
type=real

[namelist:well_mixed_gases=n2o_mix_ratio]
compulsory=true
description=N2O mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A02
type=real

[namelist:well_mixed_gases=o2_mix_ratio]
compulsory=true
description=O2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A04
type=real

[namelist:well_mixed_gases=so2_mix_ratio]
compulsory=true
description=SO2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A06
type=real

[planet properties]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Model/Planet/Properties
sort-key=Section-A02

[run configuration]
compulsory=false
ns=namelist
title=Run Task Settings

[runge-kutta]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Timestepping/runge kutta
sort-key=Section-A01
title=Runge-Kutta

#==============================================================================
# SCIENCE CONFIGURATION
#==============================================================================
[science]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Science
sort-key=Section-A03

[semi-implicit]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Timestepping/semi-implicit
sort-key=Section-A02
title=Semi-implicit

[timestep placements]
ns=namelist/Science/Timestep placement
sort-key=Section-A02
